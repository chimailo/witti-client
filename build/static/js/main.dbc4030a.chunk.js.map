{"version":3,"sources":["components/Editor/styles/Editor.module.css","components/Editor/styles/Button.module.css","components/Editor/styles/Emoji.module.css","components/Editor/styles/Link.module.css","components/Editor/styles/Linkify.module.css","lib/constants.ts","components/PrivateRoute.tsx","lib/axiosConfig.ts","components/Head.tsx","components/forms/Login.tsx","components/svg/logo.tsx","components/Loading.tsx","lib/hooks/user.ts","pages/Login/index.tsx","components/forms/Profile.tsx","components/forms/Signup.tsx","components/forms/Tag.tsx","lib/hooks/posts.ts","lib/validators.ts","pages/Signup/index.tsx","hero.jpg","components/Post/Embed.tsx","components/Post/Content.tsx","components/svg/pen.tsx","components/svg/quote.tsx","pages/Landing/index.tsx","components/Editor/plugins/charCounter.tsx","components/Editor/post.tsx","components/Editor/setup.tsx","components/Editor/profile.tsx","components/Editor/message.tsx","components/modals/CreatePost.tsx","components/modals/EditProfile.tsx","components/dropdown/Sidebar.tsx","components/Sidebar.tsx","lib/hooks/notifs.ts","components/Search.tsx","components/Header.tsx","lib/hooks/useIntersectionObserver.ts","components/Widgets/TopTags.tsx","components/Widgets/WhoToFollow.tsx","components/Widgets/index.tsx","components/Page.tsx","components/modals/DeletePost.tsx","components/dropdown/PostCard.tsx","components/Post/Header.tsx","components/dropdown/share.tsx","components/Post/Meta.tsx","components/Post/Footer.tsx","components/cards/PostCard.tsx","components/tabs/index.tsx","pages/Home/index.tsx","pages/Explore/index.tsx","components/NotifCard.tsx","pages/Notifications/index.tsx","components/Messages.tsx","lib/hooks/messages.ts","pages/Messages/index.tsx","pages/Post/index.tsx","components/cards/ProfileCard.tsx","pages/Profile/index.tsx","components/tabs/Follow.tsx","pages/Profile/Followers.tsx","pages/Profile/Following.tsx","components/dropdown/message.tsx","components/Chat.tsx","pages/Chat/index.tsx","pages/Tag/index.tsx","components/App/index.tsx","reportWebVitals.ts","lib/theme.ts","index.tsx"],"names":["module","exports","KEYS","ROUTES","PrivateRoute","children","rest","user","useQueryClient","getQueryData","render","props","to","pathname","state","from","location","setAuthToken","token","axios","defaults","headers","common","Head","title","description","theme","useTheme","Helmet","lang","name","content","palette","primary","main","useStyles","makeStyles","createStyles","field","marginTop","spacing","button","color","background","paper","LoginForm","formik","classes","values","isSubmitting","handleChange","handleBlur","handleSubmit","onSubmit","TextField","label","type","className","value","email","onChange","onBlur","fullWidth","password","Button","variant","disableElevation","disabled","Logo","size","Link","component","RouterLink","SvgIcon","viewBox","style","fontSize","width","height","rx","fill","d","bottom","white","top","animationDuration","position","left","circle","strokeLinecap","Loading","Box","py","display","justifyContent","alignItems","CircularProgress","thickness","disableShrink","CenteredLoading","React","forwardRef","ref","useLocation","iconSize","resource","hasNextPage","isFetchingNextPage","fetchNextPage","endIcon","onClick","includes","useAuth","localStorage","getItem","useQuery","a","get","data","enabled","useUser","username","useSetProfile","queryClient","useMutation","console","log","dob","put","Date","res","onMutate","cacheKey","setQueryData","oldData","bio","avatar","onError","error","useInfiniteUsers","url","useInfiniteQuery","pageParam","getNextPageParam","lastPage","nextCursor","useFollowUser","user_id","follow","post","post_id","pageIndex","key","widget","undefined","page","pages","newPage","map","id","author","isFollowing","splice","message","onSettled","_data","_error","invalidateQueries","useTagsToFollow","useFollowTag","tag_id","tag","response","wrapper","zIndex","transformOrigin","transform","backgroundColor","padding","breakpoints","up","maxWidth","boxShadow","shadows","margin","withRouter","history","useHistory","status","JSON","stringify","onSuccess","setItem","mutate","isError","loggedIn","useEffect","replace","Grid","container","justify","minHeight","item","xs","sm","md","Paper","elevation","textAlign","Typography","align","noWrap","my","p","bgcolor","grey","initialValues","gutterBottom","ProfileForm","useState","selectedDate","setSelectedDate","touched","errors","helperText","utils","DateFnsUtils","DatePicker","format","date","multiline","rows","SignupForm","password2","TagForm","setTouched","placeholder","length","onFocus","join","useInfinitePosts","useDeletePost","delete","useAllTags","validateName","Yup","max","min","required","validateUsername","matches","excludeEmptyString","test","exclusive","process","Signup","validateOnChange","validationSchema","nullable","oneOf","paragraph","embed","borderRadius","marginBottom","border","EmbedPost","underline","Avatar","aria-label","src","profile","alt","mx","mb","marginLeft","body","match","dangerouslySetInnerHTML","__html","stateToHTML","convertFromRaw","parse","lineHeight","PostContent","postPage","parent","Body","split","flexWrap","tags","marginRight","dark","inlineStyles","ITALIC","entityStyleFn","entity","toLowerCase","getData","element","attributes","href","rel","textDecoration","PenIcon","QuoteIcon","root","flexDirection","imgContainer","image","sample","Landing","matchesXs","useMediaQuery","down","posts","isLoading","hero","AppBar","Container","Toolbar","disableGutters","FeaturedPostsCarousel","AutoPlaySwipeableViews","autoPlay","SwipeableViews","activePost","setActivePost","enableMouseEvents","axis","direction","index","onChangeIndex","step","interval","CharCounter","editorState","limit","count","getCurrentContent","getPlainText","emojiPlugin","createEmojiPlugin","emojiStyles","useNativeArt","selectButtonContent","EmojiSuggestions","EmojiSelect","inlineToolbarPlugin","createInlineToolbarPlugin","InlineToolbar","linkifyPlugin","createLinkifyPlugin","target","linkifyStyles","linkPlugin","createLinkPlugin","linkStyles","undoPlugin","createUndoPlugin","undoContent","redoContent","undo","buttonStyles","redo","UndoButton","RedoButton","plugins","PostEditor","editorRef","closeEditor","setTags","selectedTags","setSelectedTags","EditorState","createEmpty","setEditorState","auth","createPost","pageParams","i","getTime","comments","likes","isLiked","created_on","now","toLocaleDateString","month","day","useCreatePost","createComment","useCreateComment","charLength","hasText","px","pt","editorStyles","editor","Chip","onDelete","filter","t","Divider","externalProps","LinkButton","flexGrow","contentState","convertToRaw","push","submitEditor","textTransform","fontWeight","CreatePostModal","setTag","setErrors","addTag","useAddTag","xsDown","isOpen","handleClose","handleFormSubmit","e","preventDefault","schema","validate","Dialog","fullScreen","open","onClose","aria-labelledby","DialogTitle","IconButton","DialogContent","maxHeight","overflow","regex","RegExp","EditProfileModal","saveProfile","DialogContentText","DialogActions","menuPaper","minWidth","menuDivider","menuItem","link","alignContent","listItemIcon","SidebarMenu","anchorEl","setModalOpen","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","keepMounted","Boolean","MenuItem","ListItemIcon","ListItemText","removeQueries","removeItem","menu","overflowX","between","list","listItem","transition","transitions","create","ListItemLink","icon","renderLink","useMemo","itemProps","activeStyle","ListItem","Hidden","only","primaryTypographyProps","Sidebar","setAnchorEl","isModalOpen","useRef","notifs","refetchInterval","handleMenuClose","current","focus","List","Badge","overlap","badgeContent","aria-controls","aria-haspopup","event","currentTarget","mdDown","secondary","smUp","CreatePost","search","light","searchIcon","pointerEvents","inputRoot","suggestions","right","scrollbarWidth","SearchComponent","setValue","setData","setIsError","setError","setIsLoading","fetchSearchResults","term","debouncedSave","useCallback","debounce","newValue","InputBase","inputProps","Suggestions","disablePadding","results","divider","users","ListItemAvatar","toolbar","drawer","typography","fontWeightBold","Header","isDrawerOpen","setDrawerOpen","back","meta","toggleDrawer","goBack","ml","Drawer","anchor","useIntersectionObserver","onIntersect","threshold","rootMargin","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","el","observe","unobserve","visibility","more","TopTags","loadMoreRef","followTag","aboutTag","followedBy","Fragment","WhoToFollow","followUser","useToFollow","slice","Widgets","gridWidget","paddingLeft","Page","smDown","DeleteModal","deletePost","Red","menuProfile","text","PostCardMenu","isDeleteModalOpen","setDeleteModal","closeMenu","PostHeader","menuList","paddingRight","gutters","ShareMenu","TwitterShareButton","hashtags","TwitterIcon","round","FacebookShareButton","FacebookIcon","WhatsappShareButton","WhatsappIcon","PostMeta","setModal","updateLike","useUpdatePostLike","PostPageMeta","toLocaleTimeString","hour12","hour","weekday","minute","year","PostFooter","isCreatePostModalOpen","setCreatePostModal","postId","useParams","parseInt","PostCard","TabPanel","other","role","hidden","a11yProps","TabChild","idx","appbar","tab","Home","mt","Tabs","textColor","indicatorColor","Tab","borderBottom","Explore","listItemAvatar","NotifCard","notificatn","notif","subject","item_id","timestamp","Notifications","square","StyledBadge","withStyles","badge","animation","opacity","Messages","isRead","flex","whiteSpace","useInfiniteMessages","Message","PostPage","commentsError","commentsLoading","commentsIsError","comment","ProfileCard","mr","timeZone","followers","following","Tag","FollowTab","TabLink","ButtonBase","focusRipple","NavLink","FollowersTab","DeleteMessage","authorId","deleteMessage","deleteMessageForUser","msgBox","authMsg","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","msgBody","borderBottomRightRadius","form","Chat","msg_id","userOnly","_d","_e","useDeleteMessage","author_id","ChatForm","setMessage","sendMessage","useSendMessage","messages","chatArea","chatForm","ChatPage","bottomScrollRef","useInfiniteChatMessages","chatError","chatIsError","chatLoading","scrollIntoView","behavior","block","inline","scrollToBottom","useTag","loading","tagError","App","exact","path","baseURL","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","preferences","createMuiTheme","default","mixins","h1","h2","h3","h4","h5","h6","QueryClient","require","ReactDOM","CssBaseline","StrictMode","QueryClientProvider","client","document","getElementById"],"mappings":"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","file":"static/js/main.dbc4030a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"Editor_editor__30U8v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonWrapper\":\"Button_buttonWrapper__2iR1t\",\"button\":\"Button_button__2wKDr\",\"active\":\"Button_active__2546w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"emojiSelect\":\"Emoji_emojiSelect__2qKrk\",\"emojiSelectButton\":\"Emoji_emojiSelectButton__I-mqy\",\"emojiSelectButtonPressed\":\"Emoji_emojiSelectButtonPressed__2SZDc\",\"emojiSelectPopover\":\"Emoji_emojiSelectPopover__2lLgY\",\"emojiSelectPopoverClosed\":\"Emoji_emojiSelectPopoverClosed__1zbC8\",\"emojiSelectPopoverTitle\":\"Emoji_emojiSelectPopoverTitle__3aqqx\",\"emojiSelectPopoverGroups\":\"Emoji_emojiSelectPopoverGroups__INXLB\",\"emojiSelectPopoverGroup\":\"Emoji_emojiSelectPopoverGroup__PznAg\",\"emojiSelectPopoverGroupTitle\":\"Emoji_emojiSelectPopoverGroupTitle__19c7n\",\"emojiSelectPopoverGroupList\":\"Emoji_emojiSelectPopoverGroupList__1o3D5\",\"emojiSelectPopoverGroupItem\":\"Emoji_emojiSelectPopoverGroupItem__2JkCZ\",\"emojiSelectPopoverToneSelect\":\"Emoji_emojiSelectPopoverToneSelect__1AcXa\",\"emojiSelectPopoverToneSelectList\":\"Emoji_emojiSelectPopoverToneSelectList__3mUh9\",\"emojiSelectPopoverToneSelectItem\":\"Emoji_emojiSelectPopoverToneSelectItem__3nzrn\",\"emojiSelectPopoverEntry\":\"Emoji_emojiSelectPopoverEntry__348ax\",\"emojiSelectPopoverEntryFocused\":\"Emoji_emojiSelectPopoverEntryFocused__2W-FC\",\"emojiSelectPopoverEntryIcon\":\"Emoji_emojiSelectPopoverEntryIcon__1J_Kt\",\"emojiSelectPopoverNav\":\"Emoji_emojiSelectPopoverNav__3B-gB\",\"emojiSelectPopoverNavItem\":\"Emoji_emojiSelectPopoverNavItem__lFOKY\",\"emojiSelectPopoverNavEntry\":\"Emoji_emojiSelectPopoverNavEntry__1-ML1\",\"emojiSelectPopoverNavEntryActive\":\"Emoji_emojiSelectPopoverNavEntryActive__3shbJ\",\"emojiSelectPopoverScrollbar\":\"Emoji_emojiSelectPopoverScrollbar__t-UwT\",\"emojiSelectPopoverScrollbarThumb\":\"Emoji_emojiSelectPopoverScrollbarThumb__wR-Ed\",\"emoji\":\"Emoji_emoji__QPqtu\",\"emojiSuggestionsEntry\":\"Emoji_emojiSuggestionsEntry__Y72gr\",\"emojiSuggestionsEntryFocused\":\"Emoji_emojiSuggestionsEntryFocused__2Ybv5\",\"emojiSuggestionsEntryText\":\"Emoji_emojiSuggestionsEntryText__1IeZE\",\"emojiSuggestionsEntryIcon\":\"Emoji_emojiSuggestionsEntryIcon__tRyLo\",\"emojiSuggestions\":\"Emoji_emojiSuggestions__12D_M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Link_input__3FV7L\",\"inputInvalid\":\"Link_inputInvalid__3tV4f\",\"link\":\"Link_link__2SzqL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Linkify_link__11Tlm\"};","export const REFETCH_INTERVAL = 1000;\n\n// query keys\nconst AUTH = 'auth';\nconst USER = 'user';\nconst USER_PROFILE = 'profile';\nconst HOME_FEED = 'home/latest';\nconst CHAT_KEY = 'chat';\nconst NOTIFS = 'notifs';\nconst NOTIFS_COUNT = 'notifs_count';\nconst MESSAGES_KEY = 'messages';\nconst CREATE_POST = 'create-post';\nconst TAGS = 'tags';\nconst TO_FOLLOW = 'widget-toFollow';\nconst TAG_TO_FOLLOW = 'widget-tagToFollow';\n\nexport const KEYS = {\n  CHAT_KEY,\n  AUTH,\n  USER,\n  USER_PROFILE,\n  HOME_FEED,\n  NOTIFS,\n  CREATE_POST,\n  NOTIFS_COUNT,\n  MESSAGES_KEY,\n  TO_FOLLOW,\n  TAG_TO_FOLLOW,\n  TAGS,\n};\n\n// routes\nconst LANDING = '/';\nconst LOGIN = '/login';\nconst SIGNUP = '/signup';\nconst TERMS = '/terms';\n\nconst HOME = '/home';\nconst EXPLORE = '/explore';\nconst NOTIFICATIONS = '/notifications';\nconst MESSAGES = '/messages';\n\nconst CHAT = '/messages/:username';\nconst TAG = '/tags/:name';\nconst POST = '/posts/:postId';\n\nconst PROFILE = '/:username';\nconst FOLLOWERS = '/:username/followers';\nconst FOLLOWING = '/:username/following';\n\nconst EDIT_PROFILE = '/:username/edit';\nconst SETTINGS = '/:username/settings';\n\nexport const ROUTES = {\n  LANDING,\n  LOGIN,\n  SIGNUP,\n  TERMS,\n  HOME,\n  EXPLORE,\n  NOTIFICATIONS,\n  CHAT,\n  MESSAGES,\n  TAG,\n  PROFILE,\n  FOLLOWERS,\n  FOLLOWING,\n  POST,\n  EDIT_PROFILE,\n  SETTINGS,\n};\n","import React from 'react';\nimport { Route, Redirect, RouteProps } from 'react-router-dom';\nimport { useQueryClient } from 'react-query';\nimport { ROUTES, KEYS } from '../lib/constants';\nimport { User } from '../types';\n\nconst PrivateRoute: React.FC<RouteProps> = ({ children, ...rest }) => {\n  const queryClient = useQueryClient();\n  const user = queryClient.getQueryData<User>(KEYS.AUTH);\n\n  return (\n    <Route\n      {...rest}\n      render={(props) => {\n        return !!user ? (\n          children\n        ) : (\n          <Redirect\n            to={{ pathname: ROUTES.LOGIN, state: { from: props.location } }}\n          />\n        );\n      }}\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import axios from 'axios';\n\nexport function setAxiosDefaultParams() {\n  (function () {\n    axios.defaults.baseURL = process.env.REACT_APP_API_URL;\n    axios.defaults.headers.post['Content-Type'] = 'application/json';\n  })();\n}\n\nexport function setAuthToken(token: string) {\n  if (token) {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  }\n}\n","import React from 'react'\nimport Helmet from 'react-helmet'\nimport {useTheme} from '@material-ui/core'\n\nconst Head: React.FC<{title: string, description?: string}> = ({title, description}) => {\n    const theme = useTheme()\n\n    return (\n        <Helmet>\n          <html lang=\"en\" />\n          <title>{title} | {description ? description : 'Witti'}</title>\n          <meta name=\"theme-color\" content={theme.palette.primary.main} />\n          <meta name=\"description\" content={description} />\n        </Helmet>\n    );\n  }\n  \nexport default Head\n","import { FormikProps } from 'formik';\nimport { TextField, Button } from '@material-ui/core';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n} from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    field: {\n      marginTop: theme.spacing(2),\n    },\n    button: {\n      marginTop: '3rem',\n      color: theme.palette.background.paper,\n    },\n  })\n);\n\nexport default function LoginForm({formik}: {formik: FormikProps<{\n  email: string;\n  password: string;\n}>}) {\n  const classes = useStyles();\n  const {values,\n    isSubmitting,\n    handleChange,\n    handleBlur,\n  handleSubmit} = formik\n\n  return (\n          <form onSubmit={handleSubmit}>\n            <TextField\n              name='email'\n              label='Email'\n              type='text'\n              className={classes.field}\n              value={values.email}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              fullWidth\n            />\n            <TextField\n              name='password'\n              label='Password'\n              type='password'\n              className={classes.field}\n              value={values.password}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              fullWidth\n            />\n            <Button\n              type='submit'\n              color='primary'\n              variant='contained'\n              className={classes.button}\n              disableElevation\n              fullWidth\n              disabled={isSubmitting}\n            >\n              Login\n            </Button>\n          </form>\n  );\n}\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport Link from '@material-ui/core/Link';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport { ROUTES } from '../../lib/constants';\n\nexport default function Logo({ size = 60 }: { size?: number }) {\n  return (\n    <Link to={ROUTES.HOME} component={RouterLink}>\n      <SvgIcon\n        viewBox='0 0 192 116'\n        color='secondary'\n        style={{ fontSize: size }}\n      >\n        <rect width='192' height='115.5' rx='57.75' fill='#14B89C' />\n        <path\n          d='M69.0234 72.0273L74.7109 49.4141H79.7695L71.1562 79H67.0547L59.8633 56.5781L52.8633 79H48.7617L40.1758 49.4141H45.207L51.0312 71.5625L57.9219 49.4141H61.9961L69.0234 72.0273ZM90.4336 79H85.375V49.4141H90.4336V79ZM84.9648 41.5664C84.9648 40.7461 85.2109 40.0534 85.7031 39.4883C86.2135 38.9232 86.9609 38.6406 87.9453 38.6406C88.9297 38.6406 89.6771 38.9232 90.1875 39.4883C90.6979 40.0534 90.9531 40.7461 90.9531 41.5664C90.9531 42.3867 90.6979 43.0703 90.1875 43.6172C89.6771 44.1641 88.9297 44.4375 87.9453 44.4375C86.9609 44.4375 86.2135 44.1641 85.7031 43.6172C85.2109 43.0703 84.9648 42.3867 84.9648 41.5664ZM105.418 42.25V49.4141H110.941V53.3242H105.418V71.6719C105.418 72.8568 105.664 73.75 106.156 74.3516C106.648 74.9349 107.487 75.2266 108.672 75.2266C109.255 75.2266 110.057 75.1172 111.078 74.8984V79C109.747 79.3646 108.453 79.5469 107.195 79.5469C104.935 79.5469 103.23 78.8633 102.082 77.4961C100.934 76.1289 100.359 74.1875 100.359 71.6719V53.3242H94.9727V49.4141H100.359V42.25H105.418ZM123.738 42.25V49.4141H129.262V53.3242H123.738V71.6719C123.738 72.8568 123.984 73.75 124.477 74.3516C124.969 74.9349 125.807 75.2266 126.992 75.2266C127.576 75.2266 128.378 75.1172 129.398 74.8984V79C128.068 79.3646 126.773 79.5469 125.516 79.5469C123.255 79.5469 121.551 78.8633 120.402 77.4961C119.254 76.1289 118.68 74.1875 118.68 71.6719V53.3242H113.293V49.4141H118.68V42.25H123.738ZM140.691 79H135.633V49.4141H140.691V79ZM135.223 41.5664C135.223 40.7461 135.469 40.0534 135.961 39.4883C136.471 38.9232 137.219 38.6406 138.203 38.6406C139.188 38.6406 139.935 38.9232 140.445 39.4883C140.956 40.0534 141.211 40.7461 141.211 41.5664C141.211 42.3867 140.956 43.0703 140.445 43.6172C139.935 44.1641 139.188 44.4375 138.203 44.4375C137.219 44.4375 136.471 44.1641 135.961 43.6172C135.469 43.0703 135.223 42.3867 135.223 41.5664Z'\n          fill='white'\n        />\n      </SvgIcon>\n    </Link>\n  );\n}\n","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Box, { BoxProps } from '@material-ui/core/Box';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport CircularProgress, {\n  CircularProgressProps,\n} from '@material-ui/core/CircularProgress';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    bottom: {\n      color: theme.palette.common.white,\n    },\n    top: {\n      color: theme.palette.primary.main,\n      animationDuration: '500ms',\n      position: 'absolute',\n      left: 0,\n    },\n    circle: {\n      strokeLinecap: 'round',\n    },\n  })\n);\n\nexport function Loading(props: CircularProgressProps) {\n  const classes = useStyles();\n\n  return (\n    <Box\n      py={4}\n      position='relative'\n      display='inherit'\n      justifyContent='center'\n      alignItems='center'\n    >\n      <CircularProgress\n        variant='determinate'\n        className={classes.bottom}\n        size={props.size || 24}\n        thickness={4}\n        {...props}\n        value={100}\n      />\n      <CircularProgress\n        variant='indeterminate'\n        disableShrink\n        className={classes.top}\n        classes={{\n          circle: classes.circle,\n        }}\n        size={props.size || 24}\n        thickness={4}\n        {...props}\n      />\n    </Box>\n  );\n}\n\ninterface CenteredLoadingProps extends BoxProps {\n  size?: number;\n}\n\nexport const CenteredLoading = (props: CenteredLoadingProps) => (\n  <Box display='flex' alignItems='center' justifyContent='center' {...props}>\n    <Loading size={props.size} />\n  </Box>\n);\n\ninterface LoadMoreProps extends ButtonProps {\n  iconSize: number;\n  resource?: string;\n  hasNextPage?: boolean;\n  isFetchingNextPage: boolean;\n  fetchNextPage: () => void;\n}\n\nexport default React.forwardRef<HTMLButtonElement | null, LoadMoreProps>(\n  (props, ref) => {\n    const { pathname } = useLocation();\n    const {\n      iconSize,\n      resource,\n      hasNextPage,\n      isFetchingNextPage,\n      fetchNextPage,\n    } = props;\n\n    return (\n      <>\n        {isFetchingNextPage ? (\n          <Button\n            endIcon={<Loading size={iconSize} />}\n            disabled={isFetchingNextPage}\n            {...props}\n          >\n            Loading more...\n          </Button>\n        ) : hasNextPage ? (\n          <Button ref={ref} onClick={() => fetchNextPage()} {...props}>\n            Load more {resource}\n          </Button>\n        ) : pathname.includes('messages') ? (\n          <Button disabled={!hasNextPage} {...props}></Button>\n        ) : (\n          <Button disabled={!hasNextPage} {...props}>\n            No more {resource}\n          </Button>\n        )}\n      </>\n    );\n  }\n);\n","import axios, { AxiosError, AxiosResponse } from 'axios';\nimport {\n  useInfiniteQuery,\n  useMutation,\n  useQuery,\n  useQueryClient,\n} from 'react-query';\nimport { setAuthToken } from '../../lib/axiosConfig';\nimport { KEYS } from '../constants';\nimport {\n  APIError,\n  Post,\n  Profile,\n  User,\n  InfiniteUserResponse,\n  InfinitePostResponse,\n  InfiniteTagResponse,\n  InfiniteTagPages,\n  Tag,\n  AuthParams,\n} from '../../types';\n\nexport function useSignup() {\n  return useMutation(\n    async (values: AuthParams) => {\n      const { email, password, name, username } = values;\n\n      const { data }: AxiosResponse<{ token: string }> = await axios.post(\n        '/users/register',\n        JSON.stringify({ email, password, name, username })\n      );\n      return data;\n    },\n    {\n      onSuccess: ({ token }) => localStorage.setItem('token', token),\n      onError: (error: AxiosError<APIError>) =>\n        console.log(error.response?.data),\n    }\n  );\n}\n\nexport function useLogin() {\n  return useMutation(\n    async (values: Pick<AuthParams, 'email' | 'password'>) => {\n      const { data }: AxiosResponse<{ token: string }> = await axios.post(\n        '/users/login',\n        JSON.stringify(values)\n      );\n      return data;\n    },\n    {\n      onSuccess: ({ token }) => localStorage.setItem('token', token),\n      onError: (error: AxiosError<APIError>) =>\n        console.log(error.response?.data),\n    }\n  );\n}\n\nexport function useAuth() {\n  const token = localStorage.getItem('token');\n  if (token) setAuthToken(token);\n\n  return useQuery<User, APIError>(\n    KEYS.AUTH,\n    async () => {\n      const { data }: AxiosResponse<User> = await axios.get('/users/auth');\n      return data;\n    },\n    {\n      enabled: !!token,\n    }\n  );\n}\n\nexport function useUser(username: string) {\n  const token = localStorage.getItem('token');\n  if (token) setAuthToken(token);\n\n  return useQuery<User, AxiosError<APIError>>(\n    [KEYS.USER, username],\n    async () => {\n      const { data }: AxiosResponse<User> = await axios.get(\n        `/profile/${username}`\n      );\n      return data;\n    }\n  );\n}\n\nexport function useSetProfile() {\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem('token');\n\n  if (token) setAuthToken(token);\n\n  return useMutation(\n    async ({\n      values\n    }: {\n      values: Omit<Profile, 'created_on' | 'updated_on'>; cacheKey: string\n    }) => {\n    console.log(values.dob)\n    const res: AxiosResponse<Profile> = await axios.put(\n      '/profile',\n      // @ts-expect-error\n      {...values, dob: new Date(values.dob)}\n    )\n    return res.data\n  },\n  {\n    onMutate: ({cacheKey, values}) => \n      // @ts-expect-error\n      queryClient.setQueryData<Profile>(cacheKey, oldData => ({\n        ...oldData,\n        name: values.name,\n        username: values.username,\n        bio: values.bio,\n        dob: values.dob,\n        avatar: values.avatar,\n      })),\n    onError: (error: AxiosError<APIError>) => {\n      console.log(error)\n    }\n  }\n  )\n}\n\nexport function useToFollow() {\n  const token = localStorage.getItem('token');\n  if (token) setAuthToken(token);\n\n  return useQuery<\n    Pick<User, 'id' | 'profile' | 'isFollowing'>[],\n    AxiosError<APIError>\n  >(KEYS.TO_FOLLOW, async () => {\n    const {\n      data,\n    }: AxiosResponse<\n      Pick<User, 'id' | 'profile' | 'isFollowing'>[]\n    > = await axios.get(`/users/to-follow`);\n    return data;\n  });\n}\n\nexport function useInfiniteUsers(url: string) {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useInfiniteQuery<InfiniteUserResponse, AxiosError<APIError>>(\n    url,\n    async ({ pageParam = 0 }) => {\n      const res: AxiosResponse<InfiniteUserResponse> = await axios.get(\n        `${url}?cursor=${pageParam}`\n      );\n      return res.data;\n    },\n    {\n      getNextPageParam: (lastPage) => lastPage.nextCursor ?? false,\n    }\n  );\n}\n\ntype Args = {\n  pages: InfiniteUserResponse[];\n  pageParams: unknown;\n};\n\nexport function useFollowUser() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async ({\n      user_id,\n      follow,\n    }: {\n      user_id: number;\n      post_id?: number;\n      key: string | any[];\n      pageIndex?: number;\n      follow?: boolean;\n      widget?: boolean;\n    }) => {\n      const res: AxiosResponse<User> = await axios.post(\n        `/users/${user_id}/${follow ? 'unfollow' : 'follow'}`\n      );\n      return res.data;\n    },\n    {\n      onMutate: ({ user_id, post_id, pageIndex, key, follow, widget }) => {\n        if (pageIndex !== undefined && typeof pageIndex === 'number') {\n          if (post_id) {\n            return queryClient.setQueryData<{\n              pages: InfinitePostResponse[];\n              pageParams: unknown;\n              // @ts-expect-error\n            }>(key, (oldData) => {\n              const page = oldData?.pages[pageIndex];\n\n              if (page) {\n                const newPage = page?.data.map((post) =>\n                  post.id === post_id\n                    ? {\n                        ...post,\n                        author: {\n                          ...post.author,\n                          isFollowing: follow ? false : true,\n                        },\n                      }\n                    : post\n                );\n\n                oldData?.pages.splice(pageIndex, 1, {\n                  data: newPage,\n                  nextCursor: page?.nextCursor,\n                });\n              }\n              return oldData;\n            });\n          } else {\n            // @ts-expect-error\n            return queryClient.setQueryData<Args>(key, (oldData) => {\n              const page = oldData?.pages[pageIndex];\n\n              if (page) {\n                const newPage = page?.data.map((user) =>\n                  user.id === user_id\n                    ? {\n                        ...user,\n                        isFollowing: follow ? false : true,\n                      }\n                    : user\n                );\n\n                oldData?.pages.splice(pageIndex, 1, {\n                  data: newPage,\n                  nextCursor: page?.nextCursor,\n                });\n              }\n              return oldData;\n            });\n          }\n        }\n        if (post_id) {\n          return queryClient.setQueryData<Post>(\n            key,\n            // @ts-expect-error\n            (post) => {\n              return {\n                ...post,\n                author: {\n                  ...post?.author,\n                  isFollowing: follow ? false : true,\n                },\n              };\n            }\n          );\n        } else {\n          if (widget) {\n            // @ts-expect-error\n            return queryClient.setQueryData<User[]>(key, (oldData) =>\n              oldData?.map((user) =>\n                user.id === user_id\n                  ? { ...user, isFollowing: follow ? false : true }\n                  : user\n              )\n            );\n          }\n          return queryClient.setQueryData<User>(\n            key,\n            // @ts-expect-error\n            (user) => ({\n              ...user,\n              isFollowing: follow ? false : true,\n            })\n          );\n        }\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.message);\n        // to error reporting service\n      },\n      onSettled: (_data, _error, { key }) => queryClient.invalidateQueries(key),\n    }\n  );\n}\n\nexport function useTagsToFollow() {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useInfiniteQuery<InfiniteTagResponse, AxiosError<APIError>>(\n    KEYS.TAG_TO_FOLLOW,\n    async ({ pageParam = 0 }) => {\n      const res: AxiosResponse<InfiniteTagResponse> = await axios.get(\n        `/tags/to-follow?cursor=${pageParam}`\n      );\n      return res.data;\n    },\n    {\n      getNextPageParam: (lastPage) => lastPage.nextCursor ?? false,\n    }\n  );\n}\n\nexport function useFollowTag() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async ({\n      tag_id,\n    }: {\n      tag_id: number;\n      pageIndex: number;\n      key: string | any[];\n    }) => {\n      const res: AxiosResponse<Tag[]> = await axios.post(\n        `/tags/${tag_id}/follow`\n      );\n      return res.data;\n    },\n    {\n      onMutate: ({ tag_id, pageIndex, key }) => {\n        // @ts-expect-error\n        queryClient.setQueryData<InfiniteTagPages>(key, (oldData) => {\n          const page = oldData?.pages[pageIndex];\n\n          if (page) {\n            const newPage = page?.data.map((tag) => {\n              if (tag.id === tag_id) {\n                if (tag.isFollowing) {\n                  tag.isFollowing = false;\n                } else {\n                  tag.isFollowing = true;\n                }\n              }\n              return tag;\n            });\n\n            oldData?.pages.splice(pageIndex, 1, {\n              data: newPage,\n              nextCursor: page?.nextCursor,\n            });\n          }\n          return oldData;\n        });\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.error('Error: ', error.response?.data);\n        // to error reporting service\n      },\n      onSettled: () => queryClient.invalidateQueries(),\n    }\n  );\n}\n","import { useEffect } from 'react';\nimport {\n  Link as RouterLink,\n  RouteComponentProps,\n  withRouter,\n} from 'react-router-dom';\nimport { StaticContext, useHistory } from 'react-router';\nimport { Formik } from 'formik';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, createStyles, Theme, useTheme } from '@material-ui/core';\n\nimport Head from '../../components/Head';\nimport LoginForm from '../../components/forms/Login';\nimport Logo from '../../components/svg/logo';\nimport { CenteredLoading } from '../../components/Loading';\nimport { ROUTES } from '../../lib/constants';\nimport { useAuth } from '../../lib/hooks/user';\nimport { useLogin } from '../../lib/hooks/user';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    wrapper: {\n      height: '100%',\n      width: '100%',\n      position: 'relative',\n      '&:after': {\n        content: '\"\"',\n        position: 'fixed',\n        width: '100%',\n        height: '70vh',\n        zIndex: -1,\n        top: 0,\n        transformOrigin: 'left top',\n        transform: 'skewY(-15deg)',\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    paper: {\n      width: '100%',\n      padding: theme.spacing(3, 5),\n      [theme.breakpoints.up('sm')]: {\n        maxWidth: '500px',\n        boxShadow: theme.shadows[3],\n        padding: theme.spacing(5, 10),\n        margin: theme.spacing(4, 'auto'),\n      },\n    },\n    field: {\n      marginTop: theme.spacing(2),\n    },\n    button: {\n      marginTop: '3rem',\n      color: theme.palette.background.paper,\n    },\n  })\n);\n\nfunction Login(\n  props: RouteComponentProps<{}, StaticContext, { from: { pathname: string } }>\n) {\n  const theme = useTheme();\n  const classes = useStyles();\n  const history = useHistory();\n  const { data, status } = useAuth();\n  const { mutate, isError, error } = useLogin();\n\n  const loggedIn = data && localStorage.getItem('token');\n  const { from } = props.location.state || {\n    from: { pathname: ROUTES.LANDING },\n  };\n\n  console.log(loggedIn)\n  useEffect(() => {\n    if (loggedIn) {\n      history.replace(from);\n    }\n  }, [from, history, loggedIn]);\n\n  if (loggedIn) return <CenteredLoading height='100vh' />;\n\n  return (\n    <>\n      <Head title='Login' />\n      {status === 'loading' ? (\n        <CenteredLoading height='100vh' />\n      ) : (\n    <div className={classes.wrapper}>\n      <Grid\n        container\n        alignItems='center'\n        justify='center'\n        style={{ minHeight: '100vh' }}\n      >\n        <Grid item xs={12} sm={8} md={6} component='main'>\n          <Paper color='primary' elevation={0} className={classes.paper}>\n            <Box textAlign='center'>\n              <Logo />\n            </Box>\n            <Typography component='p' variant='h6' align='center' noWrap>\n              Log in to your account.\n            </Typography>\n            {/* <LoginForm /> */}\n    {isError && (\n      <Box my={2} p={1} bgcolor={theme.palette.grey[100]}>\n        <Typography\n          color='error'\n          variant='subtitle1'\n          align='center'\n        >\n          {error?.response?.data.message}\n        </Typography>\n      </Box>\n    )}\n      <Formik\n        initialValues={{\n          email: '',\n          password: '',\n        }}\n        onSubmit={async (values) => mutate(values)}\n        >\n        {(props) => <LoginForm formik={props} />}\n        </Formik>\n            <Typography\n              variant='body2'\n              style={{ marginTop: '2rem' }}\n              gutterBottom\n            >\n              Don't have an account?\n              <Link component={RouterLink} to={ROUTES.SIGNUP} color='primary'>\n                <strong> Sign up here.</strong>\n              </Link>\n            </Typography>\n          </Paper>\n        </Grid>\n      </Grid>\n    </div>\n      )}\n      </>\n  );\n}\n\nexport default withRouter(Login);\n","import { useState } from \"react\";\nimport { FormikProps } from \"formik\";\nimport DateFnsUtils from '@date-io/date-fns';\nimport { TextField } from '@material-ui/core';\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n} from '@material-ui/core/styles';\n// import { ProfileEditor } from \"../Editor\";\nimport { Profile } from \"../../types\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    field: {\n      marginTop: theme.spacing(2),\n    },\n    button: {\n      marginTop: '3rem',\n      color: theme.palette.background.paper,\n    },\n  })\n);\n\nexport default function ProfileForm({formik}: {formik: FormikProps<Omit<Profile, \"created_on\" | \"updated_on\">>}) {\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null)\n  const classes = useStyles();\n  const {values, touched, errors, handleChange, handleBlur} = formik\n\n  const handleDateChange = (date: Date | null) => setSelectedDate(date);\n\n  return (\n    <form>\n      <TextField\n        name='name'\n        label='Your name'\n        type='text'\n        className={classes.field}\n        value={values.name}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        helperText={errors?.name && touched?.name && errors?.name}\n        error={!!(errors?.name && touched?.name)}\n        fullWidth\n      />\n      <TextField\n        name='username'\n        label='Username'\n        type='text'\n        className={classes.field}\n        value={values.username}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        helperText={\n          errors?.username && touched?.username && errors?.username\n        }\n        error={!!(errors?.username && touched?.username)}\n        fullWidth\n      />\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\n        <DatePicker\n          fullWidth\n          name='dob'\n          label='Birthday'\n          format=\"MM/dd\"\n          className={classes.field}\n          value={selectedDate}\n          onBlur={handleBlur}\n          onChange={handleDateChange}\n          helperText={errors?.dob && touched?.dob && errors?.dob}\n        />\n      </MuiPickersUtilsProvider>\n      <TextField\n      multiline\n        name='bio'\n        label='About you'\n        type='bio'\n        rows={4}\n        className={classes.field}\n        value={values.bio}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        helperText={\n          errors?.bio && touched?.bio && errors?.bio\n        }\n        error={!!(touched?.bio && errors?.bio)}\n        fullWidth\n      />\n      {/* <ProfileEditor user={user!.profile} cacheKey={cacheKey} /> */}\n    </form>\n  )\n}\n","import { FormikProps } from 'formik';\nimport { Button, TextField } from '@material-ui/core';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n} from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    field: {\n      marginTop: theme.spacing(2),\n    },\n    button: {\n      marginTop: '3rem',\n      color: theme.palette.background.paper,\n    },\n  })\n);\n\nexport default function SignupForm({formik}: {formik: FormikProps<{\n  name: string;\n  username: string;\n  email: string;\n  password: string;\n  password2: string;\n}>}) {\n  const classes = useStyles();\n  const { values, errors, touched, isSubmitting, handleChange, handleBlur, handleSubmit } = formik\n  \n  return (\n      <form onSubmit={handleSubmit}>\n        <TextField\n          name='name'\n          label='Your Name'\n          type='name'\n          className={classes.field}\n          value={values.name}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          helperText={\n            errors.name && touched.name && errors.name\n          }\n          error={!!(touched.name && errors.name)}\n          fullWidth\n        />\n        <TextField\n          name='username'\n          label='Username'\n          type='username'\n          className={classes.field}\n          value={values.username}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          helperText={\n            errors.username && touched.username && errors.username\n          }\n          error={!!(touched.username && errors.username)}\n          fullWidth\n        />\n          <TextField\n            name='email'\n            label='Email'\n            type='email'\n            className={classes.field}\n            value={values.email}\n            onChange={handleChange}\n            onBlur={handleBlur}\n            helperText={\n              errors.email && touched.email && errors.email\n            }\n            error={!!(touched.email && errors.email)}\n            fullWidth\n          />\n          <TextField\n            name='password'\n            label='Password'\n            type='password'\n            className={classes.field}\n            value={values.password}\n            onChange={handleChange}\n            onBlur={handleBlur}\n            helperText={\n              errors.password && touched.password && errors.password\n            }\n            error={!!(touched.password && errors.password)}\n            fullWidth\n          />\n          <TextField\n            name='password2'\n            label='Confirm Your Password'\n            type='password'\n            className={classes.field}\n            value={values.password2}\n            onChange={handleChange}\n            onBlur={handleBlur}\n            helperText={\n              errors.password2 &&\n              touched.password2 &&\n              errors.password2\n            }\n            error={!!(touched.password2 && errors.password2)}\n            fullWidth\n          />\n          <Button\n            type='submit'\n            color='primary'\n            variant='contained'\n            className={classes.button}\n            disabled={isSubmitting}\n            disableElevation\n            fullWidth\n          >\n            Sign Up\n          </Button>\n          </form>\n  )\n}\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\ninterface TagFormProps {\n  value: string;\n  errors?: any[];\n  handleChange: (e: any) => void;\n  handleSubmit: (e: any) => void;\n}\n\nexport default function TagForm(props: TagFormProps) {\n  const [touched, setTouched] = useState(false);\n  const { errors, value, handleChange, handleSubmit } = props;\n\n  return (\n    <form style={{ width: '100%' }} onSubmit={handleSubmit}>\n      <TextField\n        fullWidth\n        label='Tags'\n        name='tag'\n        placeholder='Enter tag name and press enter'\n        type='text'\n        color='primary'\n        value={value}\n        onChange={handleChange}\n        error={touched && errors && errors.length > 0}\n        onFocus={() => setTouched(true)}\n        onBlur={() => setTouched(false)}\n        helperText={\n          touched && errors\n            ? errors.length === 1\n              ? errors[0]\n              : errors.join(', ')\n            : \"Don't forget to tag your post, it increases it's visibilty\"\n        }\n      />\n    </form>\n  );\n}\n","import axios, { AxiosError, AxiosResponse } from 'axios';\nimport {\n  useInfiniteQuery,\n  useMutation,\n  useQuery,\n  useQueryClient,\n} from 'react-query';\nimport { setAuthToken } from '../../lib/axiosConfig';\nimport {\n  APIError,\n  User,\n  InfinitePostResponse,\n  Post,\n  Tag,\n  InfinitePostPages,\n} from '../../types';\n\nexport function usePost(post_id: number) {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useQuery<Post, AxiosError<APIError>>(`/posts/${post_id}`, async () => {\n    const res: AxiosResponse<Post> = await axios.get(`/posts/${post_id}`);\n    return res.data;\n  });\n}\n\nexport function useInfinitePosts(key: string | any[], url: string) {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useInfiniteQuery<InfinitePostResponse, AxiosError<APIError>>(\n    key,\n    async ({ pageParam = 0 }) => {\n      const res: AxiosResponse<InfinitePostResponse> = await axios.get(\n        `${url}&cursor=${pageParam}`\n      );\n      return res.data;\n    },\n    {\n      getNextPageParam: (lastPage) => lastPage.nextCursor ?? false,\n    }\n  );\n}\n\nexport function useCreatePost() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async ({ post }: { post: string; author?: User; key?: string | any[] }) => {\n      const res: AxiosResponse<Post> = await axios.post(`/posts`, { post });\n      return res.data;\n    },\n    {\n      onMutate: ({ post, author, key }) => {\n        // @ts-expect-error\n        queryClient.setQueryData<InfinitePostPages>(key, (oldData) => ({\n          pageParams: oldData?.pageParams,\n          pages: oldData?.pages.map((page, i) => {\n            if (i === 0)\n              return {\n                nextCursor: page.nextCursor,\n                data: [\n                  {\n                    id: new Date().getTime(),\n                    post: JSON.parse(post).body,\n                    comments: 0,\n                    likes: 0,\n                    isLiked: false,\n                    parent: null,\n                    created_on: new Date(Date.now()).toLocaleDateString(\n                      'en-gb',\n                      {\n                        month: 'short',\n                        day: 'numeric',\n                      }\n                    ),\n                    author: {\n                      id: author?.id,\n                      name: author?.profile.name,\n                      avatar: author?.profile.avatar,\n                      username: author?.profile.username,\n                    },\n                  },\n                  ...page.data,\n                ],\n              };\n            return page;\n          }),\n        }));\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.message);\n        // to error reporting service\n      },\n      onSettled: () => queryClient.invalidateQueries(),\n    }\n  );\n}\n\nexport function useCreateComment() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async ({ post, post_id }: { post: string; post_id: number }) => {\n      const res: AxiosResponse<Post> = await axios.post(\n        `/posts/${post_id}/comments`,\n        {\n          post,\n        }\n      );\n      return res.data;\n    },\n    {\n      onError: (error: AxiosError<APIError>) => {\n        console.error('Error: ', error.response?.data);\n        // to error reporting service\n      },\n      onSettled: () => queryClient.invalidateQueries(),\n    }\n  );\n}\n\nexport function useDeletePost() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (post_id: number) => {\n      const res: AxiosResponse<Post> = await axios.delete(`/posts/${post_id}`);\n      return res.data;\n    },\n    {\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.response?.data.message);\n        // to error reporting service\n      },\n      onSuccess: () => queryClient.invalidateQueries(),\n    }\n  );\n}\n\nexport function useUpdatePostLike() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async ({\n      post_id,\n    }: {\n      post_id: number;\n      pageIndex: number;\n      key: string | any[];\n    }) => {\n      const res: AxiosResponse<Post> = await axios.post(\n        `/posts/${post_id}/likes`\n      );\n      return res.data;\n    },\n    {\n      onMutate: ({ pageIndex, post_id, key }) => {\n        // @ts-expect-error\n        queryClient.setQueryData<InfinitePostPages>(key, (oldData) => {\n          const page = oldData?.pages[pageIndex];\n\n          if (page) {\n            const newPage = page?.data.map((post) => {\n              if (post.id === post_id) {\n                if (post.isLiked) {\n                  post.likes = post.likes - 1;\n                  post.isLiked = false;\n                } else {\n                  post.likes = post.likes + 1;\n                  post.isLiked = true;\n                }\n              }\n              return post;\n            });\n\n            oldData?.pages.splice(pageIndex, 1, {\n              data: newPage,\n              nextCursor: page?.nextCursor,\n            });\n          }\n          return oldData;\n        });\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.message);\n        // to error reporting service\n      },\n      onSettled: () => queryClient.invalidateQueries(),\n    }\n  );\n}\n\nexport function useTag(name: string) {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useQuery<Tag, AxiosError<APIError>>(['tag', name], async () => {\n    const res: AxiosResponse<Tag> = await axios.get(`/tags?name=${name}`);\n    return res.data;\n  });\n}\n\nexport function useAllTags() {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useQuery<Pick<Tag, 'id' | 'name'>[], AxiosError<APIError>>(\n    `all-tags`,\n    async () => {\n      const res: AxiosResponse<Pick<Tag, 'id' | 'name'>[]> = await axios.get(\n        `/tags/all-tags`\n      );\n      return res.data;\n    }\n  );\n}\n\nexport function useAddTag() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (tag: string) => {\n      const res: AxiosResponse<Pick<Tag, 'id' | 'name'>> = await axios.post(\n        `/tags`,\n        {\n          name: tag,\n        }\n      );\n      return res.data;\n    },\n    {\n      onMutate: (tag) => {\n        queryClient.setQueryData<Pick<Tag, 'id' | 'name'>[]>(\n          `tags`,\n          // @ts-expect-error\n          (oldData) =>\n            oldData && [{ id: new Date().getTime(), name: tag }, ...oldData]\n        );\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.error('Error: ', error.response?.data);\n        // to error reporting service\n      },\n      onSettled: () => queryClient.invalidateQueries(`tags`),\n    }\n  );\n}\n","import axios from 'axios';\nimport * as Yup from 'yup';\n\nexport const validateName = () =>\n  Yup.string()\n    .max(32, 'Must be 32 characters or less')\n    .min(2, 'Must be at least 2 characters')\n    .required('Required');\n\nexport const validateUsername = () =>\n  Yup.string()\n    .max(32, 'Must be 32 characters or less')\n    .min(3, 'Must be 3 characters or more')\n    .matches(/^[a-zA-Z0-9_]*$/, {\n      message: 'Must contain only valid characters (a-z, A-Z, 0-9, and _)',\n      excludeEmptyString: true,\n    })\n    .required('Username is required')\n    .test({\n      name: 'uniqueUsername',\n      exclusive: true,\n      message: 'A user with that username already exists',\n      test: async (value) => {\n        const res = await axios.post(\n          `${process.env.REACT_APP_API_URL}/profile/check-username`,\n          { username: value }\n        );\n        return res.data.res;\n      },\n    });\n\nexport const validateBio = (len: number) =>\n  Yup.string().max(len, `Must be ${len} characters or less.`).nullable();\n\nexport const validateEmail = () =>\n  Yup.string()\n    .email('Invalid email address')\n    .required('Email is required')\n    .test({\n      name: 'uniqueEmail',\n      exclusive: true,\n      message: 'A user with that email already exists',\n      test: async (value) => {\n        const res = await axios.post(\n          `${process.env.REACT_APP_API_URL}/users/check-email`,\n          { email: value }\n        );\n        return res.data.res;\n      },\n    });\n\nexport const validatePassword = () =>\n  Yup.string()\n    .min(8, 'Must be 8 characters or more')\n    .required('Password is Required');\n\nexport const validatePasswordConfirm = () =>\n  Yup.string()\n    .required('You need to confirm your password')\n    .nullable()\n    .oneOf([Yup.ref('password'), null], 'Both password fields must match');\n\nexport const validateTag = () =>\n  Yup.string()\n    .max(32, 'Must be 32 characters or less')\n    .min(2, 'Must be at least 2 characters')\n    .matches(/^[a-zA-Z0-9_]*$/, {\n      message: 'Must contain only valid characters (a-z, A-Z, 0-9)',\n      excludeEmptyString: true,\n    })\n    .test({\n      name: 'uniqueTag',\n      exclusive: true,\n      message: 'That tag already exists',\n      test: async (value) => {\n        const res = await axios.post(\n          `${process.env.REACT_APP_API_URL}/tags/check`,\n          { tag: value }\n        );\n        return res.data.res;\n      },\n    });\n","import { useEffect } from 'react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup'\nimport {Link as RouterLink} from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, createStyles, Theme, useTheme } from '@material-ui/core';\n\nimport Head from '../../components/Head';\nimport Logo from '../../components/svg/logo';\nimport { CenteredLoading } from '../../components/Loading';\nimport { ROUTES } from '../../lib/constants';\nimport { SignupForm } from '../../components/forms';\nimport { useAuth, useSignup } from '../../lib/hooks/user';\nimport { validateName, validateUsername, validateEmail, validatePassword, validatePasswordConfirm } from '../../lib/validators';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    wrapper: {\n      height: '100%',\n      width: '100%',\n      position: 'relative',\n      '&:after': {\n        content: '\"\"',\n        position: 'fixed',\n        width: '100%',\n        height: '70vh',\n        zIndex: -1,\n        top: 0,\n        transformOrigin: 'left top',\n        transform: 'skewY(-15deg)',\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    paper: {\n      width: '100%',\n      padding: theme.spacing(3, 5),\n      [theme.breakpoints.up('sm')]: {\n        maxWidth: '500px',\n        boxShadow: theme.shadows[3],\n        padding: theme.spacing(5, 10),\n        margin: theme.spacing(4, 'auto'),\n      },\n    },\n    field: {\n      marginTop: theme.spacing(2),\n    },\n    button: {\n      marginTop: '3rem',\n      color: theme.palette.background.paper,\n    },\n  })\n);\n\nexport default function Signup() {\n  const history = useHistory();\n  const theme = useTheme();\n  const classes = useStyles();\n  const {mutate, error, isError} = useSignup()\n  const { data, status } = useAuth();\n\n  const loggedIn = data && localStorage.getItem('token');\n\n  useEffect(() => {\n    if (loggedIn) {\n      history.replace(ROUTES.EXPLORE);\n    }\n  }, [history, loggedIn]);\n\n  if (loggedIn) return <CenteredLoading height='100vh' />;\n\n  return (\n    <>\n      <Head title='Sign up' />\n      {status === 'loading' ? (\n        <CenteredLoading height='100vh' />\n      ) : (\n        <div className={classes.wrapper}>\n          <Grid container alignItems='center' justify='center'>\n            <Grid item xs={12} sm={8} md={6} component='main'>\n              <Paper color='primary' elevation={0} className={classes.paper}>\n                <Box textAlign='center'>\n                  <Logo />\n                </Box>\n                <Typography\n                  component='p'\n                  variant='h6'\n                  align='center'\n                  className={classes.field}\n                  noWrap\n                >\n                  Create your account.\n                </Typography>\n    {isError && (\n      <Box my={2} p={1} bgcolor={theme.palette.grey[100]}>\n        <Typography\n          color='error'\n          variant='subtitle1'\n          align='center'\n        >\n          {error?.response?.data.message}\n        </Typography>\n      </Box>\n    )}\n    <Formik\n      initialValues={{\n        name: '',\n        username: '',\n        email: '',\n        password: '',\n        password2: '',\n      }}\n      validateOnChange={false}\n      validationSchema={Yup.object({\n        name: validateName(),\n        username: validateUsername(),\n        email: validateEmail(),\n        password: validatePassword(),\n        password2: validatePasswordConfirm(),\n      })}\n      onSubmit={async (values) => mutate(values)}\n    >\n    {(props) => (<SignupForm formik={props} />)}\n    </Formik>\n                <Typography\n                  variant='body2'\n                  style={{ marginTop: '2rem' }}\n                  gutterBottom\n                >\n                  Already have an account?\n                  <Link\n                    component={RouterLink}\n                    to={ROUTES.LOGIN}\n                    color='primary'\n                  >\n                    <strong> Login here.</strong>\n                  </Link>\n                </Typography>\n                <Typography variant='body2' paragraph>\n                  By clicking the sign up button, you agree to our\n                  <Link\n                    component={RouterLink}\n                    to={ROUTES.TERMS}\n                    color='primary'\n                  >\n                    {' terms'}\n                  </Link>\n                </Typography>\n              </Paper>\n            </Grid>\n          </Grid>\n        </div>\n      )}\n      </>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/hero.60b9fde1.jpg\";","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { convertFromRaw } from 'draft-js';\nimport { stateToHTML } from 'draft-js-export-html';\nimport { Box, Avatar, Link, Typography } from '@material-ui/core';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { Post } from '../../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    embed: {\n      display: 'flex',\n      borderRadius: 8,\n      padding: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n      backgroundColor: theme.palette.grey[100],\n      border: `1px solid ${theme.palette.grey[400]}`,\n    },\n  })\n);\n\nexport default function EmbedPost({ post }: { post: Post['parent'] }) {\n  const classes = useStyles();\n\n  return (\n    <Link\n      underline='none'\n      color='textPrimary'\n      to={`/posts/${post.id}`}\n      component={RouterLink}\n      className={classes.embed}\n    >\n      <Avatar\n        aria-label='avatar'\n        src={post.author.profile.name}\n        alt={post.author.profile.name}\n        style={{ width: '24px', height: '24px' }}\n      />\n      <Box width='100%' mx={1}>\n        <Box display='flex' alignItems='center' mb={1}>\n          <Typography\n            color='textPrimary'\n            variant='subtitle2'\n            component='h6'\n            noWrap\n          >\n            <small>{post.author.profile.name}</small>\n          </Typography>\n          <Typography\n            color='textSecondary'\n            variant='subtitle2'\n            component='h6'\n            noWrap\n            style={{ marginLeft: 8 }}\n          >\n            <small>{`@${post.author.profile.username}`}</small>\n          </Typography>\n        </Box>\n        {post.body.match('(^{\"blocks\":)') ? (\n          <Typography>\n            <small\n              dangerouslySetInnerHTML={{\n                __html: stateToHTML(convertFromRaw(JSON.parse(post.body))),\n              }}\n            />\n          </Typography>\n        ) : (\n          <Typography style={{ lineHeight: 1.2 }}>\n            <small>{post.body}</small>\n          </Typography>\n        )}\n      </Box>\n    </Link>\n  );\n}\n","import React from 'react';\nimport { Link as RouterLink, useLocation } from 'react-router-dom';\nimport { convertFromRaw } from 'draft-js';\nimport { stateToHTML } from 'draft-js-export-html';\nimport { Box, Link, Typography } from '@material-ui/core';\nimport EmbedPost from './Embed';\nimport { Post } from '../../types';\n\ninterface PostContentProps {\n  post: Post;\n  postPage?: boolean;\n}\n\nexport default function PostContent({ post, postPage }: PostContentProps) {\n  const { pathname } = useLocation<string>();\n\n  return (\n    <>\n      {post.parent ? (\n        <Body post={post.body} />\n      ) : postPage ? (\n        <Body post={post.body} postPage />\n      ) : (\n        <Link underline='none' to={`/posts/${post.id}`} component={RouterLink}>\n          <Body post={post.body} />\n        </Link>\n      )}\n      {post.parent && !pathname.split('/').includes('posts') && (\n        <EmbedPost post={post.parent} />\n      )}\n      <Box flexWrap='wrap' display='flex' alignItems='center' mb={2}>\n        {post?.tags.map((tag) => (\n          <Link\n            color='textSecondary'\n            key={tag.id}\n            to={`/tags/${tag.name}`}\n            component={RouterLink}\n            style={{ marginRight: 8 }}\n          >{`#${tag.name}`}</Link>\n        ))}\n      </Box>\n    </>\n  );\n}\n\nexport function Body({ post, postPage, dark }: { post: string; postPage?: boolean; dark?: boolean }) {\n  const options = {\n    inlineStyles: {\n      ITALIC: {\n        style: { fontSize: 14 },\n      },\n    },\n    entityStyleFn: (entity: any) => {\n      const entityType = entity.get('type').toLowerCase();\n      if (entityType === 'link') {\n        const data = entity.getData();\n        return {\n          element: 'a',\n          attributes: {\n            href: data.url,\n            rel: data.rel,\n          },\n          style: {\n            color: '#12aac9',\n            textDecoration: 'none'\n          },\n        };\n      }\n    },\n  };\n  \n  return post.match('({\"blocks\":)') ? (\n    <Typography\n      color={dark ? 'secondary' : 'textPrimary'}\n      component='p'\n      gutterBottom\n      variant={postPage ? 'h6' : 'subtitle1'}\n      dangerouslySetInnerHTML={{\n        __html: stateToHTML(convertFromRaw(JSON.parse(post).body), options),\n      }}\n    />\n  ) : (\n    <Typography\n      color={dark ? 'secondary' : 'textPrimary'}\n      component='p'\n      gutterBottom\n      variant={postPage ? 'h6' : 'subtitle1'}\n    >\n      {post}\n    </Typography>\n  );\n}\n","import React from 'react';\nimport SvgIcon, { SvgIconProps } from '@material-ui/core/SvgIcon';\n\nexport default function PenIcon(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d='m102.5 100.75h-56.85l11.761-8.387a1.744 1.744 0 0 0 .711-1.141l1.613-9.843 2.932-5.058 1.267.734a1.75 1.75 0 0 0 2.446-.737l18.243-36.818.953.522-7.737 17.778a1.749 1.749 0 0 0 .906 2.3 1.727 1.727 0 0 0 .7.146 1.749 1.749 0 0 0 1.603-1.046l8.375-19.25a1.749 1.749 0 0 0 -.765-2.233l-2.48-1.358 1.61-3.25a6.4 6.4 0 0 0 -11.046-6.4l-26.858 40.046a1.749 1.749 0 0 0 .575 2.488l1.267.735-2.932 5.057-7.74 6.291a1.748 1.748 0 0 0 -.638 1.185l-1.816 18.239h-13.1a1.75 1.75 0 0 0 0 3.5h77a1.75 1.75 0 0 0 0-3.5zm-22.852-72.1a2.9 2.9 0 0 1 5 2.9l-20.575 41.54-10.242-5.938zm-20.008 45.915-2.216 3.822-4.886-2.832 2.216-3.822zm-9.327 3.746 5.826 3.376-1.353 8.25-9.032 6.44 4.84-8.349a1.75 1.75 0 0 0 -3.028-1.756l-4.84 8.351 1.1-11.04z' />\n    </SvgIcon>\n  );\n}\n","import React from \"react\"\nimport SvgIcon, { SvgIconProps } from \"@material-ui/core/SvgIcon\"\n\nexport default function QuoteIcon(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M0.1 352.5c0 66.8 54.1 120.9 120.9 120.9 66.8 0 120.9-54.1 120.9-120.9s-54.1-120.9-120.9-120.9c-13.7 0-26.9 2.4-39.2 6.6C109.1 82.1 230.8-18.5 118 64.3 -7.1 156.2 0 348.8 0.1 352.4 0.1 352.4 0.1 352.5 0.1 352.5z\" />\n      <path d=\"M266.2 352.5c0 66.8 54.1 120.9 120.9 120.9s120.9-54.1 120.9-120.9S453.9 231.6 387.1 231.6c-13.7 0-26.9 2.4-39.2 6.6C375.2 82.1 496.9-18.5 384 64.3 258.9 156.2 266 348.8 266.2 352.4 266.2 352.4 266.2 352.5 266.2 352.5z\" />\n    </SvgIcon>\n  )\n}\n","import React, { useEffect } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { useQuery } from 'react-query';\nimport axios, { AxiosResponse } from 'axios';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport SwipeableViews from 'react-swipeable-views';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { autoPlay } from 'react-swipeable-views-utils';\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  Typography,\n  useMediaQuery,\n  useTheme,\n  SvgIcon,\n  Box,\n} from '@material-ui/core';\n\nimport Head from '../../components/Head';\nimport hero from '../../hero.jpg';\nimport Logo from '../../components/svg/logo';\nimport { CenteredLoading } from '../../components/Loading';\nimport {Body} from '../../components/Post/Content'\nimport { ROUTES } from '../../lib/constants';\nimport { Post } from '../../types';\nimport { QuoteIcon } from '../../components/svg';\nimport { useAuth } from '../../lib/hooks/user';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: 'relative',\n      height: '100vh',\n      justifyContent: 'center',\n      display: 'flex',\n      flexDirection: 'column',\n      '&:after': {\n        top: 0,\n        left: 0,\n        content: '\"\"',\n        zIndex: -1,\n        width: '100%',\n        height: '100vh',\n        display: 'block',\n        position: 'absolute',\n        backgroundColor: 'rgba(0, 0, 0, 0.7)',\n      },\n    },\n    imgContainer: {\n      width: '100%',\n      height: '100vh',\n      position: 'absolute',\n      zIndex: -1,\n      top: 0,\n      left: 0,\n    },\n    image: {\n      width: '100%',\n      height: '100%',\n    },\n    margin: {\n      [theme.breakpoints.up('sm')]: {\n        margin: theme.spacing(0, 1),\n      },\n    },\n    main: {\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'column',\n    },\n    sample: {\n      width: '100%',\n      minHeight: 120,\n      display: 'flex',\n      alignItems: 'center',\n      backgroundColor: 'rgba(0, 0, 0, 0.1)',\n      padding: theme.spacing(3, 0),\n    },\n  })\n);\n\nexport default function Landing() {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matchesXs = useMediaQuery(theme.breakpoints.down('xs'));\n  const history = useHistory();\n  const { data, status } = useAuth();\n  const loggedIn = data && localStorage.getItem('token');\n\n  const { data: posts, isLoading, isError } = useQuery(\n    'featured-posts',\n    async () => {\n      const res: AxiosResponse<Post[]> = await axios.get(`/posts/featured`);\n      return res.data;\n    }\n  );\n\n  useEffect(() => {\n    if (loggedIn) {\n      history.replace(ROUTES.HOME);\n    }\n  }, [history, loggedIn]);\n\n  if (loggedIn) return <CenteredLoading height='100vh' />;\n\n  return (\n    <>\n    <Head title='Landing' />\n    {status === 'loading' ? (\n      <CenteredLoading height='100vh' />\n    ) : (\n      <div className={classes.root}>\n        <div className={classes.imgContainer}>\n          <img src={hero} alt='Logo' className={classes.image} />\n        </div>\n        <AppBar color='transparent' elevation={0}>\n          <Container maxWidth='md'>\n            <Toolbar\n              component='nav'\n              disableGutters\n              style={{ justifyContent: 'space-between' }}\n            >\n              <Logo />\n              <div>\n                <Button\n                  variant='outlined'\n                  color='secondary'\n                  component={RouterLink}\n                  to={ROUTES.SIGNUP}\n                  className={classes.margin}\n                >\n                  Sign up\n                </Button>\n                <Button\n                  color='secondary'\n                  component={RouterLink}\n                  to={ROUTES.LOGIN}\n                  className={classes.margin}\n                >\n                  Login\n                </Button>\n              </div>\n            </Toolbar>\n          </Container>\n        </AppBar>\n        <Box\n          height={400}\n          component='main'\n          display='flex'\n          flexDirection='column'\n          justifyContent='space-between'\n        >\n          <Container maxWidth='sm' className={classes.main}>\n            <Typography\n              align='center'\n              variant={matchesXs ? 'h4' : 'h3'}\n              component='h1'\n              color='secondary'\n              gutterBottom\n            >\n              Want to see something funny?\n            </Typography>\n            <Typography\n              component='h6'\n              align='center'\n              color='secondary'\n              paragraph\n            >\n              Join in the fun and share your funny moments.\n            </Typography>\n            <Button\n              size='large'\n              variant='outlined'\n              color='primary'\n              component={RouterLink}\n              to={ROUTES.SIGNUP}\n              style={{ margin: 'auto' }}\n            >\n              Join for free.\n            </Button>\n          </Container>\n          <section className={classes.sample}>\n            <Container maxWidth='sm'>\n              {isLoading && <CenteredLoading />}\n              {isError && (\n                <Typography component='p' align='center'>\n                  An error occured\n                </Typography>\n              )}\n              {posts && <FeaturedPostsCarousel posts={posts} />}\n            </Container>\n          </section>\n        </Box>\n      </div>\n      )}\n    </>\n  );\n}\n\nconst AutoPlaySwipeableViews = autoPlay(SwipeableViews);\n\nfunction FeaturedPostsCarousel({ posts }: { posts: Post[] }) {\n  const [activePost, setActivePost] = React.useState(0);\n  const theme = useTheme();\n  const handleStepChange = (step: number) => {\n    setActivePost(step);\n  };\n\n  return (\n    <AutoPlaySwipeableViews\n      enableMouseEvents\n      axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n      index={activePost}\n      onChangeIndex={handleStepChange}\n      interval={7000}\n    >\n      {posts.map((post) => (\n        <>\n          <Typography\n            color='secondary'\n            component='p'\n            align='center'\n            paragraph\n            style={{ padding: theme.spacing(0, 2) }}\n          >\n            <SvgIcon\n              component={QuoteIcon}\n              viewBox='0 0 508 508'\n              color='secondary'\n              fontSize='small'\n              style={{\n                marginRight: theme.spacing(2),\n              }}\n            />\n            <Body post={post.body} dark />\n          </Typography>\n          <Typography\n            variant='subtitle2'\n            align='right'\n            color='secondary'\n            component='p'\n          >\n            - { // @ts-expect-error\n            post.author.profile.username}\n          </Typography>\n        </>\n      ))}\n    </AutoPlaySwipeableViews>\n  );\n}\n","import React from 'react';\nimport { EditorState } from 'draft-js';\nimport { Typography } from '@material-ui/core';\n\ninterface IProps {\n  editorState: EditorState;\n  limit: number;\n}\n\nexport default function CharCounter({ editorState, limit }: IProps) {\n  const count = editorState.getCurrentContent().getPlainText().length;\n\n  return (\n    <Typography\n      variant='body2'\n      component='p'\n      color={count > limit ? 'error' : 'textPrimary'}\n    >\n      {count}\n    </Typography>\n  );\n}\n","import React, { Fragment, useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { convertToRaw, EditorState } from 'draft-js';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Chip from '@material-ui/core/Chip';\nimport Divider from '@material-ui/core/Divider';\nimport { Link, Typography } from '@material-ui/core';\nimport EmojiEmotionsOutlinedIcon from '@material-ui/icons/EmojiEmotionsOutlined';\nimport RedoIcon from '@material-ui/icons/Redo';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport { useTheme } from '@material-ui/core/styles';\n\nimport createEmojiPlugin from '@draft-js-plugins/emoji';\nimport createInlineToolbarPlugin from '@draft-js-plugins/inline-toolbar';\nimport createLinkifyPlugin from '@draft-js-plugins/linkify';\nimport createLinkPlugin from '@draft-js-plugins/anchor';\nimport createUndoPlugin from '@draft-js-plugins/undo';\nimport Editor from '@draft-js-plugins/editor';\nimport PluginEditor from '@draft-js-plugins/editor';\nimport { ItalicButton, BoldButton } from '@draft-js-plugins/buttons';\n\nimport '@draft-js-plugins/inline-toolbar/lib/plugin.css';\nimport emojiStyles from './styles/Emoji.module.css';\nimport editorStyles from './styles/Editor.module.css';\nimport linkStyles from './styles/Link.module.css';\nimport linkifyStyles from './styles/Linkify.module.css';\nimport buttonStyles from './styles/Button.module.css';\n\nimport CharCounter from './plugins/charCounter';\nimport { ROUTES } from '../../lib/constants';\nimport { Tag } from '../../types';\nimport { useAuth } from '../../lib/hooks/user';\nimport { useCreateComment, useCreatePost } from '../../lib/hooks/posts';\n\nconst emojiPlugin = createEmojiPlugin({\n  theme: emojiStyles,\n  useNativeArt: true,\n  selectButtonContent: <EmojiEmotionsOutlinedIcon color='primary' />,\n});\nconst { EmojiSuggestions, EmojiSelect } = emojiPlugin;\n\nconst inlineToolbarPlugin = createInlineToolbarPlugin();\nconst { InlineToolbar } = inlineToolbarPlugin;\n\nconst linkifyPlugin = createLinkifyPlugin({\n  target: '_blank',\n  // @ts-ignore\n  theme: linkifyStyles,\n});\n\nconst linkPlugin = createLinkPlugin({\n  placeholder: 'http://',\n  // @ts-ignore\n  theme: linkStyles,\n});\n\nconst undoPlugin = createUndoPlugin({\n  undoContent: <UndoIcon color='primary' />,\n  redoContent: <RedoIcon color='primary' />,\n  theme: {\n    undo: buttonStyles.button,\n    redo: buttonStyles.button,\n  },\n});\nconst { UndoButton, RedoButton } = undoPlugin;\n\nconst plugins = [\n  emojiPlugin,\n  inlineToolbarPlugin,\n  linkPlugin,\n  linkifyPlugin,\n  undoPlugin,\n];\n\ninterface IProps {\n  cacheKey?: string | any[];\n  editorRef?: React.Ref<PluginEditor>;\n  closeEditor?: () => void;\n  post_id?: number;\n  tags: Pick<Tag, 'id' | 'name'>[];\n  selectedTags: Pick<Tag, 'id' | 'name'>[];\n  setTags: React.Dispatch<React.SetStateAction<Pick<Tag, 'id' | 'name'>[]>>;\n  setSelectedTags: React.Dispatch<\n    React.SetStateAction<Pick<Tag, 'id' | 'name'>[]>\n  >;\n}\n\nfunction PostEditor({\n  post_id,\n  editorRef,\n  closeEditor,\n  cacheKey,\n  tags,\n  setTags,\n  selectedTags,\n  setSelectedTags,\n}: IProps) {\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n  const theme = useTheme();\n  const history = useHistory<string>();\n\n  const { data: auth } = useAuth();\n  const createPost = useCreatePost();\n  const createComment = useCreateComment();\n\n  const charLength = editorState.getCurrentContent().getPlainText().length;\n  const hasText = editorState.getCurrentContent().hasText();\n\n  const submitEditor = () => {\n    if (!hasText || charLength > 250) return;\n\n    const contentState = editorState.getCurrentContent();\n    const post = JSON.stringify({ body: convertToRaw(contentState) });\n    \n    if (post_id) {\n      createComment.mutate({ post_id, post });\n      closeEditor && closeEditor();\n    } else {\n      createPost.mutate({ post, key: cacheKey, author: auth });\n      closeEditor && closeEditor();\n      history.push(ROUTES.HOME);\n    }\n  };\n\n  console.log(editorRef);\n\n  return (\n    <>\n      <Box px={2} pt={2}>\n        <Box display='flex' justifyContent='space-between'>\n          <Box\n            display='flex'\n            alignItems='center'\n            justifyContent='flex-end'\n            mb={1}\n          >\n            <Avatar\n              aria-label='avatar'\n              src={auth?.profile.avatar}\n              alt={auth?.profile.name}\n            />\n            <Link\n              underline='none'\n              to={`/${auth?.profile.username}/profile`}\n              component={RouterLink}\n              style={{ marginLeft: 8 }}\n            >\n              <Typography\n                color='textPrimary'\n                variant='subtitle2'\n                component='h6'\n                noWrap\n              >\n                {auth?.profile.name}\n              </Typography>\n              <Typography\n                color='textSecondary'\n                variant='subtitle2'\n                component='h6'\n                noWrap\n              >{`@${auth?.profile.username}`}</Typography>\n            </Link>\n          </Box>\n          <Box display='flex' alignItems='center'>\n            <Typography variant='subtitle2' component='h6'>\n              {new Date(Date.now()).toLocaleDateString('en-gb', {\n                month: 'short',\n                day: 'numeric',\n              })}\n            </Typography>\n          </Box>\n        </Box>\n        <div className={editorStyles.editor}>\n          <Editor\n            ref={editorRef}\n            editorState={editorState}\n            onChange={setEditorState}\n            plugins={plugins}\n          />\n        </div>\n        {!post_id && \n        <Box display='flex' alignItems='center' flexWrap='wrap'>\n          {selectedTags?.map((tag) => (\n            <Chip\n              key={tag.id}\n              variant='outlined'\n              size='small'\n              label={`#${tag.name}`}\n              style={{ marginRight: 8 }}\n              onDelete={() => {\n                setTags([tag, ...tags]);\n                setSelectedTags(selectedTags.filter((t) => t.id !== tag.id));\n              }}\n            />\n          ))}\n        </Box>}\n        <Divider />\n      </Box>\n      <InlineToolbar>\n        {(externalProps: any) => (\n          <Fragment>\n            <BoldButton {...externalProps} />\n            <ItalicButton {...externalProps} />\n            <linkPlugin.LinkButton {...externalProps} />\n          </Fragment>\n        )}\n      </InlineToolbar>\n      <Box display='flex' alignItems='center' py={1}>\n        <Box display='flex' flexGrow={1}>\n          <EmojiSelect />\n          <UndoButton />\n          <RedoButton />\n        </Box>\n        <CharCounter limit={250} editorState={editorState} />\n        <Button\n          variant='contained'\n          color='primary'\n          disableElevation\n          onClick={() => submitEditor()}\n          style={{\n            textTransform: 'capitalize',\n            fontWeight: 'bold',\n            margin: theme.spacing(0, 2),\n            color: theme.palette.common.white,\n          }}\n          disabled={!hasText || charLength > 250}\n        >\n          Post\n        </Button>\n      </Box>\n      <EmojiSuggestions />\n    </>\n  );\n}\n\nexport default React.forwardRef<PluginEditor, IProps>((props, ref) => (\n  <PostEditor editorRef={ref} {...props} />\n));\n","import EmojiEmotionsOutlinedIcon from '@material-ui/icons/EmojiEmotionsOutlined';\nimport RedoIcon from '@material-ui/icons/Redo';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport createEmojiPlugin from '@draft-js-plugins/emoji';\nimport createInlineToolbarPlugin from '@draft-js-plugins/inline-toolbar';\nimport createLinkifyPlugin from '@draft-js-plugins/linkify';\nimport createLinkPlugin from '@draft-js-plugins/anchor';\nimport createUndoPlugin from '@draft-js-plugins/undo';\nimport '@draft-js-plugins/inline-toolbar/lib/plugin.css';\nimport emojiStyles from './styles/Emoji.module.css';\nimport linkStyles from './styles/Link.module.css';\nimport linkifyStyles from './styles/Linkify.module.css';\nimport buttonStyles from './styles/Button.module.css';\n\n\nconst emojiPlugin = createEmojiPlugin({\n  theme: emojiStyles,\n  useNativeArt: true,\n  selectButtonContent: <EmojiEmotionsOutlinedIcon color='primary' />,\n});\n\nconst inlineToolbarPlugin = createInlineToolbarPlugin();\n\nconst linkifyPlugin = createLinkifyPlugin({\n  target: '_blank',\n  // @ts-ignore\n  theme: linkifyStyles,\n});\n\nconst linkPlugin = createLinkPlugin({\n  placeholder: 'http://',\n  // @ts-ignore\n  theme: linkStyles,\n});\n\nconst undoPlugin = createUndoPlugin({\n  undoContent: <UndoIcon color='primary' />,\n  redoContent: <RedoIcon color='primary' />,\n  theme: {\n    undo: buttonStyles.button,\n    redo: buttonStyles.button,\n  },\n});\n\nexport {undoPlugin, linkPlugin, linkifyPlugin, inlineToolbarPlugin, emojiPlugin}\n","import { Fragment, useState } from 'react';\nimport { convertToRaw, EditorState } from 'draft-js';\nimport Box from '@material-ui/core/Box';\nimport Editor from '@draft-js-plugins/editor';\nimport { ItalicButton, BoldButton } from '@draft-js-plugins/buttons';\nimport '@draft-js-plugins/inline-toolbar/lib/plugin.css';\nimport CharCounter from './plugins/charCounter';\nimport editorStyles from './styles/Editor.module.css';\nimport {undoPlugin, linkPlugin, linkifyPlugin, inlineToolbarPlugin, emojiPlugin} from './setup'\nimport { useSetProfile } from '../../lib/hooks/user';\nimport { Profile } from '../../types';\n\nconst { EmojiSuggestions, EmojiSelect } = emojiPlugin;\nconst { InlineToolbar } = inlineToolbarPlugin;\nconst { UndoButton, RedoButton } = undoPlugin;\n\nconst plugins = [\n  emojiPlugin,\n  inlineToolbarPlugin,\n  linkPlugin,\n  linkifyPlugin,\n  undoPlugin,\n];\n\nexport default function RichEditor({user, cacheKey}: {user: Omit<Profile, 'created_on' | 'updated_on'>, cacheKey: string}) {\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n  const {mutate} = useSetProfile();\n\n  const charLength = editorState.getCurrentContent().getPlainText().length;\n  const hasText = editorState.getCurrentContent().hasText();\n\n  const saveProfile = () => {\n    if (!hasText || charLength > 250) return;\n\n    const contentState = editorState.getCurrentContent();\n    const bio = JSON.stringify({ bio: convertToRaw(contentState) });\n    const values = {...user, bio}\n    \n    mutate({values, cacheKey});\n  }\n\n  setInterval(() =>  saveProfile(), 5000)\n\n  return (\n    <>\n      <Box py={2}>\n        <div className={editorStyles.editor}>\n          <Editor\n          placeholder=''\n            editorState={editorState}\n            onChange={setEditorState}\n            plugins={plugins}\n          />\n        </div>\n      </Box>\n      <InlineToolbar>\n        {(externalProps: any) => (\n          <Fragment>\n            <BoldButton {...externalProps} />\n            <ItalicButton {...externalProps} />\n            <linkPlugin.LinkButton {...externalProps} />\n          </Fragment>\n        )}\n      </InlineToolbar>\n      <Box display='flex' alignItems='center' py={1}>\n        <Box display='flex' flexGrow={1}>\n          <EmojiSelect />\n          <UndoButton />\n          <RedoButton />\n          <CharCounter limit={250} editorState={editorState} />\n        </Box>\n      </Box>\n      <EmojiSuggestions />\n    </>\n  );\n}\n","import { Fragment, useState } from 'react';\nimport { convertToRaw, EditorState } from 'draft-js';\nimport Box from '@material-ui/core/Box';\nimport Editor from '@draft-js-plugins/editor';\nimport { ItalicButton, BoldButton } from '@draft-js-plugins/buttons';\nimport '@draft-js-plugins/inline-toolbar/lib/plugin.css';\nimport CharCounter from './plugins/charCounter';\nimport editorStyles from './styles/Editor.module.css';\nimport {undoPlugin, linkPlugin, linkifyPlugin, inlineToolbarPlugin, emojiPlugin} from './setup'\nimport { useSetProfile } from '../../lib/hooks/user';\nimport { Profile } from '../../types';\n\nconst { EmojiSuggestions, EmojiSelect } = emojiPlugin;\nconst { InlineToolbar } = inlineToolbarPlugin;\nconst { UndoButton, RedoButton } = undoPlugin;\n\nconst plugins = [\n  emojiPlugin,\n  inlineToolbarPlugin,\n  linkPlugin,\n  linkifyPlugin,\n  undoPlugin,\n];\n\nexport default function RichEditor({user, cacheKey}: {user: Omit<Profile, 'created_on' | 'updated_on'>, cacheKey: string}) {\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n  const {mutate} = useSetProfile();\n\n  const charLength = editorState.getCurrentContent().getPlainText().length;\n  const hasText = editorState.getCurrentContent().hasText();\n\n  const saveProfile = () => {\n    if (!hasText || charLength > 250) return;\n\n    const contentState = editorState.getCurrentContent();\n    const bio = JSON.stringify({ bio: convertToRaw(contentState) });\n    const values = {...user, bio}\n    \n    mutate({values, cacheKey});\n  }\n\n  setInterval(() =>  saveProfile(), 5000)\n\n  return (\n    <>\n      <Box px={2} pt={2}>\n        <div className={editorStyles.editor}>\n          <Editor\n            editorState={editorState}\n            onChange={setEditorState}\n            plugins={plugins}\n          />\n        </div>\n      </Box>\n      <InlineToolbar>\n        {(externalProps: any) => (\n          <Fragment>\n            <BoldButton {...externalProps} />\n            <ItalicButton {...externalProps} />\n            <linkPlugin.LinkButton {...externalProps} />\n          </Fragment>\n        )}\n      </InlineToolbar>\n      <Box display='flex' alignItems='center' py={1}>\n        <Box display='flex' flexGrow={1}>\n          <EmojiSelect />\n          <UndoButton />\n          <RedoButton />\n          <CharCounter limit={250} editorState={editorState} />\n        </Box>\n      </Box>\n      <EmojiSuggestions />\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport PluginEditor from '@draft-js-plugins/editor';\nimport Box from '@material-ui/core/Box';\nimport Chip from '@material-ui/core/Chip';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport ClearIcon from '@material-ui/icons/Clear';\n\nimport {PostEditor} from '../Editor';\nimport TagForm from '../forms/Tag';\nimport { Tag } from '../../types';\nimport { useAllTags, useAddTag } from '../../lib/hooks/posts';\nimport { validateTag } from '../../lib/validators';\n\ntype CreatePostModalProps = {\n  editorRef: React.Ref<PluginEditor>;\n  isOpen: boolean;\n  cacheKey?: string | any[];\n  post_id?: number;\n  handleClose: () => void;\n};\n\nfunction CreatePostModal(props: CreatePostModalProps) {\n  const [selectedTags, setSelectedTags] = useState<Pick<Tag, 'id' | 'name'>[]>(\n    []\n  );\n  const [tag, setTag] = useState('');\n  const [tags, setTags] = useState<Pick<Tag, 'id' | 'name'>[]>([]);\n  const [errors, setErrors] = useState<any[]>([]);\n\n  const { data } = useAllTags();\n  const addTag = useAddTag();\n\n  const theme = useTheme();\n  const xsDown = useMediaQuery(theme.breakpoints.down('xs'));\n\n  const { isOpen, handleClose, editorRef, post_id, cacheKey } = props;\n\n  useEffect(() => {\n    if (data) setTags(data);\n  }, [data]);\n\n  const handleFormSubmit = async (e: any) => {\n    e.preventDefault();\n\n    if (!tag) return;\n\n    const schema = validateTag();\n\n    try {\n      await schema.validate(tag);\n      addTag.mutate(tag);\n      setSelectedTags([...selectedTags, ...tags.filter((t) => t.name === tag)]);\n      setTag('');\n    } catch (error) {\n      setErrors(error.errors);\n    }\n  };\n\n  return (\n    <Dialog\n      fullScreen={xsDown}\n      open={isOpen}\n      onClose={handleClose}\n      aria-labelledby='add post'\n    >\n      <DialogTitle id='add post' style={{ padding: '8px 0' }}>\n        <IconButton onClick={handleClose} color='primary'>\n          <ClearIcon />\n        </IconButton>\n      </DialogTitle>\n      <Divider />\n      <DialogContent style={{ padding: 0 }}>\n        <PostEditor\n          tags={tags}\n          setTags={setTags}\n          selectedTags={selectedTags}\n          setSelectedTags={setSelectedTags}\n          cacheKey={cacheKey}\n          editorRef={editorRef}\n          post_id={post_id}\n          closeEditor={handleClose}\n        />\n        <Box display='flex' alignItems='center' flexWrap='wrap' p={2}>\n          <TagForm\n            errors={errors}\n            value={tag}\n            handleChange={(e: any) => setTag(e.target.value)}\n            handleSubmit={(e: any) => handleFormSubmit(e)}\n          />\n        </Box>\n        <Box\n          display='flex'\n          alignItems='center'\n          flexWrap='wrap'\n          mb={4}\n          px={1}\n          maxHeight={xsDown ? 120 : 100}\n          overflow='auto'\n        >\n          {tags\n            ?.filter((item) => {\n              const regex = new RegExp(`^${tag}`, 'gi');\n              return item.name.match(regex);\n            })\n            .map((tag) => (\n              <Chip\n                key={tag.id}\n                size='small'\n                label={`#${tag.name}`}\n                style={{ margin: 4 }}\n                onClick={() => {\n                  setTags(tags.filter((t) => t.id !== tag.id));\n                  setSelectedTags([...selectedTags, tag]);\n                }}\n              />\n            ))}\n        </Box>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default React.forwardRef<PluginEditor, CreatePostModalProps>(\n  (props, ref) => {\n    return <CreatePostModal editorRef={ref} {...props} />;\n  }\n);\n","import React from 'react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@material-ui/core';\nimport { KEYS } from '../../lib/constants';\nimport {ProfileForm} from '../../components/forms';\nimport { Profile, User } from \"../../types\";\nimport { useSetProfile } from '../../lib/hooks/user';\nimport {\n  validateName,\n  validateUsername,\n} from '../../lib/validators';\n\n\n// const useStyles = makeStyles((theme: Theme) =>\n//   createStyles({\n//     wrapper: {\n//       height: '100%',\n//       width: '100%',\n//       position: 'relative',\n//       '&:after': {\n//         content: '\"\"',\n//         position: 'fixed',\n//         width: '100%',\n//         height: '70vh',\n//         zIndex: -1,\n//         top: 0,\n//         transformOrigin: 'left top',\n//         transform: 'skewY(-15deg)',\n//         backgroundColor: theme.palette.primary.main,\n//       },\n//     },\n//     paper: {\n//       width: '100%',\n//       padding: theme.spacing(3, 5),\n//       [theme.breakpoints.up('sm')]: {\n//         maxWidth: '500px',\n//         boxShadow: theme.shadows[3],\n//         padding: theme.spacing(5, 10),\n//         margin: theme.spacing(4, 'auto'),\n//       },\n//     },\n//     field: {\n//       marginTop: theme.spacing(2),\n//     },\n//     button: {\n//       marginTop: '3rem',\n//       color: theme.palette.background.paper,\n//     },\n//   })\n// );\n\ntype EditProfileModalProps = {\n  isOpen: boolean;\n  user: User\n  handleClose: () => void;\n};\n\nexport default function EditProfileModal(props: EditProfileModalProps) {\n  // const classes = useStyles();\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('xs'));\n  const {mutate} = useSetProfile();\n\n  const {isOpen, user, handleClose} = props\n\n  const initialValues: Omit<Profile, 'created_on' | 'updated_on'> = {\n    name: user?.profile.name || '',\n    username: user?.profile.username || '',\n    dob: user?.profile.dob || new Date(),\n    avatar: user?.profile.avatar || '',\n    bio: user?.profile.bio || ''\n  }\n\n  const saveProfile = (values: Omit<Profile, \"created_on\" | \"updated_on\">) => {\n    console.log(values)\n    mutate({values, cacheKey: KEYS.USER_PROFILE})\n    handleClose();\n  };\n\n  return (\n    <Dialog\n      fullScreen={fullScreen}\n      open={isOpen}\n      onClose={handleClose}\n      aria-labelledby='update profile'\n    >\n      <DialogTitle id='updateProfile'>Update your profile.</DialogTitle>\n      <Formik\n        initialValues={initialValues}\n        validateOnChange={false}\n        validationSchema={Yup.object({\n          name: validateName(),\n          username: validateUsername(),\n        })}\n        onSubmit={async (values) => saveProfile(values)}\n      >\n        {(props) => (\n        <>\n          <DialogContent>\n            <DialogContentText><ProfileForm formik={props} />\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose}>Cancel</Button>\n            <Button color='primary' variant='contained' style={{color: 'white'}} onClick={() => saveProfile(props.values)}>\n              update profile\n            </Button>\n          </DialogActions>\n        </>)}\n      </Formik>\n    </Dialog>\n  )\n}\n","import React, { useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { useQueryClient } from 'react-query';\nimport Avatar from '@material-ui/core/Avatar';\nimport Divider from '@material-ui/core/Divider';\nimport MuiLink from '@material-ui/core/Link';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport EditIcon from '@material-ui/icons/Edit';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';\nimport EditProfileModal from '../modals/EditProfile';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { KEYS, ROUTES } from '../../lib/constants';\nimport { User } from '../../types';\n\ntype MenuProps = {\n  user?: User;\n  anchorEl: null | HTMLElement;\n  handleClose: () => void;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    menuPaper: {\n      minWidth: '240px',\n    },\n    menuDivider: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n    },\n    menuItem: {\n      minHeight: '32px',\n    },\n    avatar: {\n      marginRight: theme.spacing(1),\n    },\n    profile: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'flex-start',\n      padding: theme.spacing(0, 2),\n    },\n    link: {\n      display: 'flex',\n      width: '100%',\n      justifyContent: 'center',\n      alignContent: 'center',\n    },\n    listItemIcon: {\n      color: 'inherit',\n      minWidth: 0,\n      alignItems: 'center',\n      marginRight: theme.spacing(2),\n    },\n  })\n);\n\nexport default function SidebarMenu({\n  user,\n  anchorEl,\n  handleClose,\n}: MenuProps) {\n  const [isOpen, setModalOpen] = useState(false)\n  const classes = useStyles();\n  const history = useHistory();\n  const queryClient = useQueryClient();\n\n  const handleLogout = () => {\n    queryClient.removeQueries(KEYS.AUTH);\n    localStorage.removeItem('token');\n    handleClose();\n    history.push(ROUTES.LOGIN);\n  };\n\n  return (\n    <>\n    <div>\n      <Menu\n        id='user-menu'\n        classes={{ paper: classes.menuPaper }}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n        keepMounted\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <div className={classes.profile}>\n          <Avatar\n            alt={`${user?.profile.name}`}\n            src={user?.profile.avatar}\n            className={classes.avatar}\n          />\n          <div>\n            <Typography variant='subtitle1'>\n              {`${user?.profile.name}`}\n            </Typography>\n            <Typography variant='subtitle2'>\n              {'@' + user?.profile.username}\n            </Typography>\n          </div>\n        </div>\n        <Divider className={classes.menuDivider} />\n        <MenuItem onClick={handleClose} classes={{ root: classes.menuItem }}>\n          <MuiLink\n            color='inherit'\n            underline='none'\n            component={RouterLink}\n            className={classes.link}\n            to={`/${user?.profile.username}`}\n          >\n            <ListItemIcon className={classes.listItemIcon}>\n              <PersonOutlineIcon fontSize='small' />\n            </ListItemIcon>\n            <ListItemText primary='Profile' />\n          </MuiLink>\n        </MenuItem>\n        <MenuItem\n          classes={{ root: classes.menuItem }}\n          onClick={() => {\n            handleClose()\n            setModalOpen(true)\n          }}\n        >\n          <ListItemIcon className={classes.listItemIcon}>\n            <EditIcon fontSize='small' />\n          </ListItemIcon>\n          <ListItemText primary='Edit Profile' />\n        </MenuItem>\n        <MenuItem onClick={handleClose} classes={{ root: classes.menuItem }}>\n          <MuiLink\n            color='inherit'\n            underline='none'\n            component={RouterLink}\n            className={classes.link}\n            to={`/${user?.profile.username}/settings`}\n          >\n            <ListItemIcon className={classes.listItemIcon}>\n              <SettingsOutlinedIcon fontSize='small' />\n            </ListItemIcon>\n            <ListItemText primary='Settings' />\n          </MuiLink>\n        </MenuItem>\n        <Divider className={classes.menuDivider} />\n        <MenuItem onClick={handleLogout} classes={{ root: classes.menuItem }}>\n          Logout\n        </MenuItem>\n      </Menu>\n    </div>\n    <EditProfileModal isOpen={isOpen} user={user!} handleClose={() => setModalOpen(false)} />\n    </>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n  NavLink,\n  useHistory,\n  LinkProps as RouterLinkProps,\n} from 'react-router-dom';\nimport { useQueryClient } from 'react-query';\nimport PluginEditor from '@draft-js-plugins/editor';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport Divider from '@material-ui/core/Divider';\nimport Hidden from '@material-ui/core/Hidden';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport EmailOutlinedIcon from '@material-ui/icons/EmailOutlined';\nimport HomeOutlinedIcon from '@material-ui/icons/HomeOutlined';\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { SvgIcon } from '@material-ui/core';\nimport {\n  createStyles,\n  Theme,\n  makeStyles,\n  useTheme,\n} from '@material-ui/core/styles';\nimport { Omit } from '@material-ui/types';\n\nimport CreatePostModal from './modals/CreatePost';\nimport SidebarMenu from './dropdown/Sidebar';\nimport { KEYS, ROUTES } from '../lib/constants';\nimport { useNotificationCount } from '../lib/hooks/notifs';\nimport { User } from '../types';\nimport { Logo, PenIcon } from './svg';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    menu: {\n      top: 0,\n      left: 0,\n      width: 240,\n      position: 'fixed',\n      textAlign: 'center',\n      height: '100%',\n      overflowX: 'hidden',\n      padding: theme.spacing(0, 2),\n      backgroundColor: theme.palette.background.paper,\n      [theme.breakpoints.between('sm', 'md')]: {\n        width: 100,\n      },\n    },\n    list: {\n      width: '100%',\n    },\n    listItem: {\n      margin: theme.spacing(2, 0),\n      transition: theme.transitions.create('color'),\n      color: theme.palette.grey[800],\n      '&:hover': {\n        color: theme.palette.primary.main,\n      },\n      [theme.breakpoints.up('sm')]: {\n        margin: theme.spacing(3, 0),\n      },\n    },\n    listItemIcon: {\n      color: 'inherit',\n      [theme.breakpoints.down('md')]: {\n        justifyContent: 'center',\n      },\n    },\n  })\n);\n\ntype ListItemLinkProps = {\n  primary: string;\n  to: string;\n  icon: React.ReactElement;\n};\n\nconst ListItemLink = (props: ListItemLinkProps) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matchesXs = useMediaQuery(theme.breakpoints.down('xs'));\n\n  const { to, primary, icon } = props;\n\n  const renderLink = React.useMemo(\n    () =>\n      React.forwardRef<any, Omit<RouterLinkProps, 'to'>>((itemProps, ref) => (\n        <NavLink\n          to={to}\n          ref={ref}\n          activeStyle={{ color: theme.palette.primary.main }}\n          {...itemProps}\n        />\n      )),\n    [to, theme.palette.primary.main]\n  );\n\n  return (\n    <ListItem\n      className={classes.listItem}\n      component={renderLink}\n      disableGutters\n      {...props}\n    >\n      <ListItemIcon className={classes.listItemIcon}>{icon}</ListItemIcon>\n      <Hidden only={['sm', 'md']}>\n        <ListItemText\n          primary={primary}\n          primaryTypographyProps={{ variant: matchesXs ? 'subtitle1' : 'h6' }}\n        />\n      </Hidden>\n    </ListItem>\n  );\n};\n\nexport default function Sidebar({\n  user,\n  cacheKey,\n}: {\n  user?: User;\n  cacheKey?: string | any[];\n}) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [isModalOpen, setModalOpen] = useState(false);\n  const editorRef = React.useRef<PluginEditor>(null);\n\n  const history = useHistory();\n  const queryClient = useQueryClient();\n  const { data: notifs } = useNotificationCount();\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const matchesXs = useMediaQuery(theme.breakpoints.down('xs'));\n\n  const openMenu = (event: React.MouseEvent<HTMLDivElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => setAnchorEl(null);\n\n  const handleModalOpen = () => {\n    handleMenuClose();\n    setModalOpen(true);\n  };\n\n  useEffect(() => {\n    if (editorRef.current) {\n      editorRef.current.focus();\n    }\n  }, []);\n\n  return (\n    <section className={classes.menu}>\n      <ListItem disableGutters>\n        <ListItemText>\n          <Logo />\n        </ListItemText>\n      </ListItem>\n      <List component='nav' aria-label='user menu' className={classes.list}>\n        <ListItemLink\n          primary='Home'\n          to={ROUTES.HOME}\n          icon={<HomeOutlinedIcon fontSize={matchesXs ? 'default' : 'large'} />}\n        />\n        <ListItemLink\n          primary='Explore'\n          to={ROUTES.EXPLORE}\n          icon={<SearchIcon fontSize={matchesXs ? 'default' : 'large'} />}\n        />\n        <ListItemLink\n          primary='Notifications'\n          to={ROUTES.NOTIFICATIONS}\n          icon={\n            <Badge overlap='circle' badgeContent={notifs?.count} color='error'>\n              <NotificationsNoneIcon\n                fontSize={matchesXs ? 'default' : 'large'}\n              />\n            </Badge>\n          }\n        />\n        <ListItemLink\n          primary='Messages'\n          to={ROUTES.MESSAGES}\n          icon={\n            <EmailOutlinedIcon fontSize={matchesXs ? 'default' : 'large'} />\n          }\n        />\n        <ListItem\n          aria-controls='add post'\n          aria-haspopup='true'\n          onClick={handleModalOpen}\n          className={classes.listItem}\n          disableGutters\n          button\n        >\n          <ListItemIcon className={classes.listItemIcon}>\n            <SvgIcon\n              component={PenIcon}\n              viewBox='0 0 128 128'\n              style={{ fontSize: '2.5rem' }}\n            />\n          </ListItemIcon>\n          <Hidden only={['sm', 'md']}>\n            <ListItemText\n              primary='Add Post'\n              primaryTypographyProps={{\n                variant: matchesXs ? 'subtitle1' : 'h6',\n              }}\n            />\n          </Hidden>\n        </ListItem>\n        <Divider />\n        <Hidden xsDown>\n          <ListItem\n            aria-controls='profile-menu'\n            aria-haspopup='true'\n            onClick={openMenu}\n            style={{ margin: theme.spacing(3, 0) }}\n            disableGutters\n            button\n          >\n            <ListItemIcon className={classes.listItemIcon}>\n              <Avatar alt={user?.profile.name} src={user?.profile.avatar} />\n            </ListItemIcon>\n            <Hidden mdDown>\n              <ListItemText\n                primary={`${user?.profile.name}`}\n                secondary={'@' + user?.profile.username}\n                primaryTypographyProps={{\n                  variant: 'subtitle2',\n                  noWrap: true,\n                }}\n              />\n            </Hidden>\n          </ListItem>\n        </Hidden>\n        <Hidden smUp>\n          <ListItemLink\n            primary='Profile'\n            to={`/${user?.profile.username}/profile`}\n            icon={<PersonOutlineIcon />}\n          />\n          <ListItemLink\n            primary='Settings'\n            to={ROUTES.SETTINGS}\n            icon={<SettingsOutlinedIcon />}\n          />\n          <Divider />\n          <ListItem\n            onClick={() => {\n              localStorage.removeItem('token');\n              queryClient.removeQueries(KEYS.AUTH);\n              history.push(ROUTES.LOGIN);\n            }}\n            className={classes.listItem}\n            button\n          >\n            <ListItemText primary='Logout' />\n          </ListItem>\n        </Hidden>\n      </List>\n      <SidebarMenu\n        user={user}\n        anchorEl={anchorEl}\n        handleClose={handleMenuClose}\n      />\n      {/* error boundary */}\n      <CreatePostModal\n        editorRef={editorRef}\n        isOpen={isModalOpen}\n        cacheKey={cacheKey}\n        handleClose={() => setModalOpen(false)}\n      />\n    </section>\n  );\n}\n","import axios, { AxiosError, AxiosResponse } from 'axios';\nimport {\n  useInfiniteQuery,\n  useMutation,\n  useQuery,\n  useQueryClient,\n} from 'react-query';\nimport { KEYS, REFETCH_INTERVAL } from '../constants';\nimport { setAuthToken } from '../axiosConfig';\nimport {\n  APIError,\n  InfiniteNotificationResponse,\n  Notification,\n} from '../../types';\n\nexport function useNotificationCount() {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useQuery<{ count: number }, AxiosError<APIError>>(\n    KEYS.NOTIFS_COUNT,\n    async () => {\n      const res: AxiosResponse<{ count: number }> = await axios.get(\n        `/notifications/count`\n      );\n      return res.data;\n    },\n    {\n      refetchInterval: REFETCH_INTERVAL,\n    }\n  );\n}\n\nexport function useInfiniteNotifications() {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useInfiniteQuery<InfiniteNotificationResponse, AxiosError<APIError>>(\n    KEYS.NOTIFS,\n    async ({ pageParam = 0 }) => {\n      const res: AxiosResponse<InfiniteNotificationResponse> = await axios.get(\n        `/notifications?cursor=${pageParam}`\n      );\n      return res.data;\n    },\n    {\n      getNextPageParam: (lastPage) => lastPage.nextCursor ?? false,\n    }\n  );\n}\n\nexport function useRemoveNotification() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (notif_id: number) => {\n      const res: AxiosResponse<Notification> = await axios.delete(\n        `/notifications/${notif_id}`\n      );\n      return res.data;\n    },\n    {\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.response?.data.message);\n        // to error reporting service\n      },\n      onSettled: () => queryClient.invalidateQueries(KEYS.NOTIFS),\n    }\n  );\n}\n","import React, { useCallback, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios, { AxiosError, AxiosResponse } from 'axios';\nimport debounce from 'lodash.debounce';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport {\n  Avatar,\n  Box,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  useMediaQuery,\n} from '@material-ui/core';\nimport { APIError, Search } from '../types';\nimport { CenteredLoading } from './Loading';\nimport { setAuthToken } from '../lib/axiosConfig';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    search: {\n      display: 'flex',\n      alignItems: 'center',\n      borderRadius: 32,\n      margin: theme.spacing(0, 2),\n      padding: theme.spacing(0, 2),\n      backgroundColor: theme.palette.secondary.light,\n      '&:focus': {\n        backgroundColor: 'unset',\n        border: `1px solid ${theme.palette.primary.light}`,\n        // boxShadow: `${fade(theme.palette.primary.main, 0.25)} 0 0 0 0.2rem`,\n        // borderColor: theme.palette.primary.main,\n      },\n    },\n    searchIcon: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      pointerEvents: 'none',\n      marginRight: theme.spacing(1),\n    },\n    inputRoot: {\n      width: '100%',\n    },\n    suggestions: {\n      position: 'absolute',\n      maxHeight: 400,\n      top: '100%',\n      left: 0,\n      right: 0,\n      zIndex: 1,\n      overflow: 'scroll',\n      scrollbarWidth: 'none' /* Firefox */,\n      boxShadow: theme.shadows[2],\n      margin: theme.spacing(0, 2),\n      backgroundColor: theme.palette.background.paper,\n      '-ms-overflow-style': 'none' /* IE and Edge */,\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n        margin: 'unset',\n      },\n    },\n  })\n);\n\nexport default function SearchComponent() {\n  const [value, setValue] = useState('');\n  const [data, setData] = useState<Search>();\n  const [isError, setIsError] = useState(false);\n  const [error, setError] = useState<AxiosError<APIError>>();\n  const [isLoading, setIsLoading] = useState(false);\n  const classes = useStyles();\n  const xsDown = useMediaQuery('(max-width:500px)');\n\n  const fetchSearchResults = async (term: string) => {\n    setIsLoading(true);\n    localStorage.token && setAuthToken(localStorage.token);\n\n    try {\n      const res: AxiosResponse<Search> = await axios.get(`/search?q=${term}`);\n\n      setData(res.data);\n      setIsLoading(false);\n    } catch (error) {\n      console.log(error);\n      setIsError(true);\n      setError(error);\n    }\n\n    setIsLoading(false);\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedSave = useCallback(\n    debounce((newValue: string) => fetchSearchResults(newValue), 1000),\n    []\n  );\n\n  const updateValue = (newValue: string) => {\n    setValue(newValue);\n    debouncedSave(newValue);\n  };\n\n  return (\n    <Box position={xsDown ? 'unset' : 'relative'} flexGrow={1}>\n      <form onSubmit={(e) => e.preventDefault()} className={classes.search}>\n        <div className={classes.searchIcon}>\n          <SearchIcon fontSize='small' />\n        </div>\n        <InputBase\n          placeholder='Search'\n          inputProps={{ 'aria-label': 'search' }}\n          value={value}\n          onChange={(e) => updateValue(e.target.value)}\n          classes={{ root: classes.inputRoot }}\n        />\n      </form>\n      {value && (\n        <div className={classes.suggestions}>\n          <Suggestions\n            data={data}\n            error={error}\n            isError={isError}\n            isLoading={isLoading}\n          />\n        </div>\n      )}\n    </Box>\n  );\n}\n\ninterface SuggestionProps {\n  data?: Search;\n  error?: AxiosError<APIError>;\n  isLoading: boolean;\n  isError: boolean;\n}\n\nfunction Suggestions({ data, error, isError, isLoading }: SuggestionProps) {\n  const history = useHistory();\n\n  return (\n    <List disablePadding>\n      {isLoading ? (\n        <CenteredLoading />\n      ) : isError ? (\n        <ListItem>\n          <ListItemText primary={error?.response?.data.message} />\n        </ListItem>\n      ) : (\n        <>\n          {data?.results.tags.map((tag) => (\n            <ListItem\n              key={tag.id}\n              button\n              divider\n              alignItems='flex-start'\n              onClick={() => history.push(`/tags/${tag.name}`)}\n            >\n              <ListItemText primary={`#${tag.name}`}></ListItemText>\n            </ListItem>\n          ))}\n          {data?.results.users.map((user) => (\n            <ListItem\n              key={user.id}\n              button\n              divider\n              alignItems='flex-start'\n              onClick={() => history.push(`/${user.profile.username}`)}\n            >\n              <ListItemAvatar>\n                <Avatar alt={user.profile.name} src={user.profile.avatar} />\n              </ListItemAvatar>\n              <ListItemText\n                primary={user.profile.name}\n                secondary={user.profile.username}\n              />\n            </ListItem>\n          ))}\n        </>\n      )}\n    </List>\n  );\n}\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useQueryClient } from 'react-query';\nimport Avatar from '@material-ui/core/Avatar';\nimport Box from '@material-ui/core/Box';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport Sidebar from './Sidebar';\nimport { User } from '../types';\nimport { KEYS } from '../lib/constants';\nimport Search from './Search';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    toolbar: {\n      width: '100%',\n      zIndex: 1,\n      position: 'sticky',\n      top: 0,\n      display: 'flex',\n      justifyContent: 'space-between',\n      padding: theme.spacing(0, 1),\n      backgroundColor: theme.palette.background.paper,\n    },\n    drawer: {\n      width: 240,\n    },\n    avatar: {\n      flexGrow: 0,\n      width: theme.spacing(4),\n      height: theme.spacing(4),\n    },\n    title: {\n      textTransform: 'capitalize',\n      lineHeight: '1.4',\n      fontWeight: theme.typography.fontWeightBold,\n    },\n  })\n);\n\ntype HeaderProps = {\n  title?: string;\n  user?: User;\n  avatar?: boolean;\n  back?: boolean;\n  search?: boolean;\n  meta?: string;\n};\n\nexport default function Header(props: HeaderProps) {\n  const [isDrawerOpen, setDrawerOpen] = useState(false);\n  const classes = useStyles();\n  const history = useHistory();\n  const queryClient = useQueryClient();\n  const auth = queryClient.getQueryData<User>(KEYS.AUTH);\n\n  const { user, title, search, back, avatar, meta } = props;\n\n  const toggleDrawer = (open: boolean) => (\n    event: React.KeyboardEvent | React.MouseEvent\n  ) => {\n    if (\n      event.type === 'keydown' &&\n      ((event as React.KeyboardEvent).key === 'Tab' ||\n        (event as React.KeyboardEvent).key === 'Shift')\n    ) {\n      return;\n    }\n\n    setDrawerOpen(open);\n  };\n\n  return (\n    <Toolbar classes={{ root: classes.toolbar }} disableGutters>\n      <Box display='flex' flexGrow={1} position='relative'>\n        {back && (\n          <IconButton\n            size='small'\n            aria-label='go back'\n            onClick={() => history.goBack()}\n          >\n            <KeyboardBackspaceIcon color='primary' />\n          </IconButton>\n        )}\n        {avatar && (\n          <IconButton\n            size='small'\n            aria-label='menu'\n            onClick={() => history.push(`/${auth?.profile.username}`)}\n          >\n            <Avatar\n              alt={user ? user.profile.avatar : auth?.profile.avatar}\n              src={user ? user.profile.avatar : auth?.profile.avatar}\n              className={classes.avatar}\n            />\n          </IconButton>\n        )}\n        {title && (\n          <Box\n            ml={1}\n            display='flex'\n            flexDirection='column'\n            justifyContent='center'\n          >\n            <Typography\n              variant='subtitle1'\n              component='h3'\n              className={classes.title}\n              noWrap\n            >\n              {title}\n            </Typography>\n            {meta && (\n              <Typography\n                color='textSecondary'\n                noWrap\n                style={{ lineHeight: 1 }}\n              >\n                <small>{meta}</small>\n              </Typography>\n            )}\n          </Box>\n        )}\n        {search && <Search />}\n        <Hidden smUp>\n          <IconButton\n            size='small'\n            aria-label='menu'\n            onClick={toggleDrawer(true)}\n          >\n            <MoreVertIcon />\n          </IconButton>\n          <Hidden smUp>\n            <Drawer\n              anchor='left'\n              open={isDrawerOpen}\n              onClose={toggleDrawer(false)}\n              classes={{ paper: classes.drawer }}\n            >\n              <Sidebar user={auth} />\n            </Drawer>\n          </Hidden>\n        </Hidden>\n      </Box>\n    </Toolbar>\n  );\n}\n","import React from 'react';\n\ninterface ObserverProps {\n  threshold?: number;\n  enabled?: boolean;\n  rootMargin?: string;\n  root?: React.MutableRefObject<HTMLDivElement | null>;\n  target: React.MutableRefObject<Element | null | undefined>;\n  onIntersect: () => void;\n}\n\nexport default function useIntersectionObserver({\n  root,\n  target,\n  onIntersect,\n  threshold = 0,\n  rootMargin = '0px',\n  enabled = true,\n}: ObserverProps) {\n  React.useEffect(() => {\n    if (!enabled) {\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) =>\n        entries.forEach((entry) => entry.isIntersecting && onIntersect()),\n      {\n        root: root && root.current,\n        rootMargin,\n        threshold,\n      }\n    );\n\n    const el = target && target.current;\n\n    if (!el) {\n      return;\n    }\n\n    observer.observe(el);\n\n    return () => {\n      observer.unobserve(el);\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target?.current, enabled]);\n}\n","import React, { useRef } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport Divider from '@material-ui/core/Divider';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport LoadMore from '../../components/Loading';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { CenteredLoading } from '../Loading';\nimport { KEYS } from '../../lib/constants';\nimport { useFollowTag, useTagsToFollow } from '../../lib/hooks/user';\nimport { Tag } from '../../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      maxHeight: 400,\n      overflow: 'scroll',\n      scrollbarWidth: 'none' /* Firefox */,\n      '-ms-overflow-style': 'none' /* IE and Edge */,\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    },\n    title: {\n      padding: theme.spacing(2),\n    },\n    root: {\n      display: 'flex',\n      alignItems: 'top',\n      justifyContent: 'space-between',\n      padding: theme.spacing(1, 2),\n      '&:hover span': {\n        visibility: 'visible',\n      },\n    },\n    more: {\n      visibility: 'hidden',\n      marginLeft: theme.spacing(1),\n    },\n    button: {\n      textTransform: 'lowercase',\n    },\n  })\n);\n\nexport default function TopTags() {\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const classes = useStyles();\n  const followTag = useFollowTag();\n  const {\n    data,\n    isLoading,\n    isError,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useTagsToFollow();\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  const aboutTag = (tag: Tag) => {\n    const users = tag.followedBy.users;\n    const count = tag.followedBy.count;\n    if (users.length === 1) return `Followed by ${users[0].profile.name}`;\n    if (users.length === 2 && count === 0)\n      return `Followed by ${users[0].profile.name} and ${users[1].profile.name}`;\n\n    return `Followed by ${users[0].profile.name}, ${users[1].profile.name} and ${count} others you follow.`;\n  };\n\n  return (\n    <>\n      <Paper elevation={0} className={classes.paper}>\n        <Typography className={classes.title}>\n          <strong>Top Tags to follow</strong>\n        </Typography>\n        <Divider />\n        {isLoading ? (\n          <CenteredLoading />\n        ) : isError ? (\n          <Typography align='center' gutterBottom>\n            An error occured, please try again.\n          </Typography>\n        ) : (\n          <>\n            {data?.pages.map((page, i) => (\n              <React.Fragment key={i}>\n                {page.data.map((tag) => (\n                  <React.Fragment key={tag.id}>\n                    <div className={classes.root}>\n                      <Link\n                        underline='none'\n                        to={`/tags/${tag.name}`}\n                        component={RouterLink}\n                      >\n                        <Typography noWrap variant='subtitle1'>\n                          #{tag.name}\n                        </Typography>\n                        <Typography color='textSecondary' variant='body2'>\n                          <small>{aboutTag(tag)}</small>\n                        </Typography>\n                      </Link>\n                      <span className={classes.more}>\n                        <Button\n                          variant='outlined'\n                          color='primary'\n                          size='small'\n                          className={classes.button}\n                          onClick={() =>\n                            followTag.mutate({\n                              tag_id: tag.id,\n                              pageIndex: i,\n                              key: KEYS.TAG_TO_FOLLOW,\n                            })\n                          }\n                        >\n                          {tag.isFollowing ? 'unfollow' : 'follow'}\n                        </Button>\n                      </span>\n                    </div>\n                  </React.Fragment>\n                ))}\n              </React.Fragment>\n            ))}\n            <LoadMore\n              fullWidth\n              resource='tags'\n              iconSize={16}\n              ref={loadMoreRef}\n              hasNextPage={hasNextPage}\n              isFetchingNextPage={isFetchingNextPage}\n              fetchNextPage={() => fetchNextPage()}\n              style={{ textTransform: 'capitalize' }}\n            />\n          </>\n        )}\n      </Paper>\n    </>\n  );\n}\n","import { Link as RouterLink } from 'react-router-dom';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport { Link, Typography, Button, Divider, Box } from '@material-ui/core';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { CenteredLoading } from '../Loading';\nimport { KEYS } from '../../lib/constants';\nimport { useFollowUser, useToFollow } from '../../lib/hooks/user';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      top: 0,\n      position: 'sticky',\n      marginTop: theme.spacing(0.5),\n    },\n    title: {\n      padding: theme.spacing(2),\n    },\n    link: {\n      display: 'flex',\n      alignItems: 'center',\n      flexGrow: 1,\n    },\n    avatar: {\n      [theme.breakpoints.down('xs')]: {\n        width: 32,\n        height: 32,\n      },\n    },\n  })\n);\n\nexport default function WhoToFollow() {\n  const classes = useStyles();\n  const followUser = useFollowUser();\n  const { data: users, isLoading, isError } = useToFollow();\n\n  return (\n    <Paper elevation={0} className={classes.paper}>\n      <Typography variant='subtitle1' className={classes.title}>\n        <strong>Who to follow</strong>\n      </Typography>\n      <Divider />\n      <List>\n        {isLoading ? (\n          <CenteredLoading />\n        ) : isError ? (\n          <ListItem>\n            <ListItemText primary='An unexpected error occured, please try again' />\n          </ListItem>\n        ) : (\n          <>\n            {users?.slice(0, 3).map((user) => (\n              <Box\n                key={user.id}\n                display='flex'\n                alignItems='center'\n                px={1}\n                py={2}\n              >\n                <Link\n                  underline='none'\n                  to={`/${user.profile.username}`}\n                  component={RouterLink}\n                  className={classes.link}\n                >\n                  <Avatar\n                    aria-label='avatar'\n                    src={user.profile.avatar}\n                    alt={user.profile.name}\n                    className={classes.avatar}\n                  />\n                  <Box ml={1}>\n                    <Typography noWrap color='textPrimary' variant='body2'>\n                      {user.profile.name}\n                    </Typography>\n                    <Typography color='textSecondary' variant='body2'>\n                      <small>{`@${user.profile.username}`}</small>\n                    </Typography>\n                  </Box>\n                </Link>\n                <Button\n                  variant='outlined'\n                  color='primary'\n                  size='small'\n                  aria-label={user.isFollowing ? 'unfollow' : 'follow'}\n                  style={{ textTransform: 'lowercase' }}\n                  onClick={() =>\n                    followUser.mutate({\n                      user_id: user.id,\n                      key: KEYS.TO_FOLLOW,\n                      widget: true,\n                    })\n                  }\n                >\n                  {user.isFollowing ? 'following' : 'follow'}\n                </Button>\n              </Box>\n            ))}\n          </>\n        )}\n      </List>\n    </Paper>\n  );\n}\n","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport TopTags from './TopTags';\nimport WhoToFollow from './WhoToFollow';\n\nexport default function Widgets() {\n  const { pathname } = useLocation<{ pathname: string }>();\n\n  return (\n    <>\n      {!pathname.split('/').includes('explore') && <TopTags />}\n      <WhoToFollow />\n    </>\n  );\n}\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Head from './Head';\nimport Sidebar from './Sidebar';\nimport Widgets from './Widgets';\nimport { useAuth } from '../lib/hooks/user';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    main: {\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: 104,\n      },\n      [theme.breakpoints.up('lg')]: {\n        marginLeft: 244,\n      },\n    },\n    gridWidget: {\n      paddingLeft: theme.spacing(0.5),\n    },\n  })\n);\n\nexport default function Page({\n  children,\n  cacheKey,\n  title,\n  description\n}: {\n  cacheKey?: string | any[];\n  children: React.ReactNode;\n  title: string\n  description?: string\n}) {\n  const classes = useStyles();\n  const { data: auth } = useAuth();\n\n  return (\n    <>\n    <Head title={title} description={description} />\n    <Container maxWidth='xl' disableGutters>\n      <Hidden xsDown>\n        <Sidebar user={auth} cacheKey={cacheKey} />\n      </Hidden>\n      <div className={classes.main}>\n        <Grid container>\n          <Grid item xs={12} md={8}>\n            {children}\n          </Grid>\n          <Hidden smDown>\n            <Grid item xs={12} md={4} className={classes.gridWidget}>\n              <Widgets />\n            </Grid>\n          </Hidden>\n        </Grid>\n      </div>\n    </Container>\n    </>\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Red from '@material-ui/core/colors/red';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useTheme } from '@material-ui/core/styles';\n\ntype DeleteModalProps = {\n  isOpen: boolean;\n  handleClose: () => void;\n  deletePost: () => void;\n};\n\nexport default function DeleteModal(props: DeleteModalProps) {\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('xs'));\n\n  const { isOpen, handleClose, deletePost } = props;\n\n  const handlePostDelete = () => {\n    deletePost();\n    handleClose();\n  };\n\n  return (\n    <Dialog\n      fullScreen={fullScreen}\n      open={isOpen}\n      onClose={handleClose}\n      aria-labelledby='Delete post'\n    >\n      <DialogTitle id='Repost'>Delete Post</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Are you sure you want to delete this post?\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handlePostDelete} style={{ color: Red[400] }}>\n          Delete\n        </Button>\n        <Button onClick={handleClose}>Cancel</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport { useQueryClient } from 'react-query';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\nimport FlagOutlinedIcon from '@material-ui/icons/FlagOutlined';\nimport PersonAddOutlinedIcon from '@material-ui/icons/PersonAddOutlined';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\n\nimport DeleteModal from '../modals/DeletePost';\nimport { User, Post } from '../../types';\nimport { KEYS } from '../../lib/constants';\nimport { useFollowUser } from '../../lib/hooks/user';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    menuPaper: {\n      minWidth: '220px',\n      padding: theme.spacing(1),\n    },\n    menuDivider: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n    },\n    menuItem: {\n      minHeight: '32px',\n    },\n    menuProfile: {\n      textAlign: 'center',\n      lineHeight: 1.2,\n      color: theme.palette.text.secondary,\n    },\n    link: {\n      display: 'flex',\n      width: '100%',\n      justifyContent: 'center',\n      alignContent: 'center',\n    },\n    listItemIcon: {\n      color: 'inherit',\n      minWidth: 0,\n      alignItems: 'center',\n      marginRight: theme.spacing(2),\n    },\n  })\n);\n\ntype MenuProps = {\n  post: Post;\n  page?: number;\n  cacheKey: string;\n  anchorEl: null | HTMLElement;\n  closeMenu: () => void;\n  deletePost: () => void;\n};\n\nexport default function PostCardMenu(props: MenuProps) {\n  const [isDeleteModalOpen, setDeleteModal] = useState(false);\n\n  const classes = useStyles();\n  const follow = useFollowUser();\n  const queryClient = useQueryClient();\n  const auth = queryClient.getQueryData<User>(KEYS.AUTH);\n\n  const { anchorEl, page, cacheKey, post, closeMenu, deletePost } = props;\n\n  const openDeleteModal = () => {\n    closeMenu();\n    setDeleteModal(true);\n  };\n\n  return (\n    <>\n      <Menu\n        keepMounted\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={closeMenu}\n        getContentAnchorEl={null}\n        classes={{ paper: classes.menuPaper }}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        {post.author.id !== auth?.id && (\n          <MenuItem\n            onClick={() => {\n              closeMenu();\n              follow.mutate({\n                post_id: post.id,\n                user_id: post.author.id,\n                pageIndex: page,\n                follow: post.author.isFollowing,\n                key: cacheKey,\n              });\n            }}\n            classes={{ root: classes.menuItem }}\n          >\n            <ListItemIcon className={classes.listItemIcon}>\n              <PersonAddOutlinedIcon fontSize='small' />\n            </ListItemIcon>\n            <ListItemText\n              primary={`${post.author.isFollowing ? 'unfollow' : 'follow'} @${\n                post.author.username\n              }`}\n              primaryTypographyProps={{ variant: 'subtitle2' }}\n            />\n          </MenuItem>\n        )}\n        {post.author.id === auth?.id && (\n          <MenuItem\n            onClick={openDeleteModal}\n            classes={{ root: classes.menuItem }}\n          >\n            <ListItemIcon className={classes.listItemIcon}>\n              <DeleteOutlinedIcon fontSize='small' />\n            </ListItemIcon>\n            <ListItemText\n              primary='Delete Post'\n              primaryTypographyProps={{ variant: 'subtitle2' }}\n            />\n          </MenuItem>\n        )}\n        {post.author.id !== auth?.id && (\n          <MenuItem onClick={closeMenu} classes={{ root: classes.menuItem }}>\n            <ListItemIcon className={classes.listItemIcon}>\n              <FlagOutlinedIcon fontSize='small' />\n            </ListItemIcon>\n            <ListItemText\n              primary='Report Post'\n              primaryTypographyProps={{ variant: 'subtitle2' }}\n            />\n          </MenuItem>\n        )}\n      </Menu>\n      <DeleteModal\n        isOpen={isDeleteModalOpen}\n        handleClose={() => setDeleteModal(false)}\n        deletePost={deletePost}\n      />\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Box, Avatar, Link, Typography, IconButton } from '@material-ui/core';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Dropdown from '../dropdown/PostCard';\nimport { Post } from '../../types';\nimport { useDeletePost } from '../../lib/hooks/posts';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    link: {\n      display: 'flex',\n      flexGrow: 1,\n      alignItems: 'center',\n    },\n    embed: {\n      display: 'flex',\n      borderRadius: 8,\n      padding: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n      backgroundColor: theme.palette.grey[100],\n      border: `1px solid ${theme.palette.grey[400]}`,\n    },\n  })\n);\n\ninterface PostHeaderProps {\n  post: Post;\n  page?: number;\n}\n\nexport default function PostHeader({ post, page }: PostHeaderProps) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const classes = useStyles();\n  const deletePost = useDeletePost();\n\n  const handleDropdownClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  return (\n    <>\n      <Box display='flex' alignItems='center' mb={2}>\n        <Link\n          underline='none'\n          to={`/${post.author.username}`}\n          component={RouterLink}\n          className={classes.link}\n        >\n          <Avatar\n            aria-label='avatar'\n            src={post.author.avatar}\n            alt={post.author.name}\n          />\n          <Box ml={1}>\n            <Typography\n              color='textPrimary'\n              variant='subtitle2'\n              component='h6'\n              noWrap\n            >\n              {post.author.name}\n            </Typography>\n            <Typography\n              color='textSecondary'\n              variant='subtitle2'\n              component='h6'\n              noWrap\n            >{`@${post.author.username}`}</Typography>\n          </Box>\n        </Link>\n        <Box display='flex' alignItems='center' ml={1}>\n          <Typography variant='subtitle2' component='h6' noWrap>\n            {new Date(post.created_on).toLocaleDateString('en-gb', {\n              month: 'short',\n              day: 'numeric',\n            })}\n          </Typography>\n          <IconButton aria-label='dropdown' onClick={handleDropdownClick}>\n            <ExpandMoreIcon fontSize='small' />\n          </IconButton>\n        </Box>\n      </Box>\n      <Dropdown\n        anchorEl={anchorEl}\n        page={page}\n        post={post}\n        cacheKey={`/users/${post.author.username}/posts`}\n        closeMenu={() => setAnchorEl(null)}\n        deletePost={() => deletePost.mutate(post.id)}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { FacebookIcon, FacebookShareButton, TwitterIcon, TwitterShareButton, WhatsappIcon, WhatsappShareButton } from 'react-share';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    menuPaper: {\n      borderRadius: theme.spacing(4),\n    },\n    menuList: {\n      display: 'flex',\n      alignItems: 'center',\n      paddingLeft: theme.spacing(0),\n      paddingRight: theme.spacing(0),\n    },\n    gutters: {\n      marginLeft: theme.spacing(0),\n      marginRight: theme.spacing(0),\n    },\n    listItemIcon: {\n      minWidth: 32,\n    }\n  })\n);\n\ntype MenuProps = {\n  url: string\n  tags: any[]\n  anchorEl: null | HTMLElement;\n  closeMenu: () => void;\n};\n\nexport default function ShareMenu(props: MenuProps) {\n  const classes = useStyles();\n  const { url, tags, anchorEl, closeMenu } = props;\n\n\n  return (\n    <>\n      <Menu\n        keepMounted\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={closeMenu}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n        classes={{\n          paper: classes.menuPaper,\n          list: classes.menuList,\n        }}\n      >\n        <MenuItem onClick={() => closeMenu()}\n          classes={{ gutters: classes.gutters }}>\n          <ListItemIcon classes={{root: classes.listItemIcon}}>\n            <TwitterShareButton url={url} hashtags={tags} style={{height: 32,}}>\n              <TwitterIcon size={32} round={true} />\n            </TwitterShareButton>\n          </ListItemIcon>\n        </MenuItem>\n        <MenuItem onClick={() => closeMenu()}\n          classes={{ gutters: classes.gutters }}>\n          <ListItemIcon classes={{root: classes.listItemIcon}}>\n            <FacebookShareButton url={url} style={{height: 32,}}>\n              <FacebookIcon size={32} round={true} />\n            </FacebookShareButton>\n          </ListItemIcon>\n        </MenuItem>\n        <MenuItem onClick={() => closeMenu()}\n          classes={{ gutters: classes.gutters }}>\n          <ListItemIcon classes={{root: classes.listItemIcon}}>\n            <WhatsappShareButton url={url} style={{height: 32,}}>\n              <WhatsappIcon size={32} round={true} />\n            </WhatsappShareButton>\n          </ListItemIcon>\n        </MenuItem>\n      </Menu>\n    </>\n  );\n}\n","import React, { useRef, useState } from 'react';\nimport PluginEditor from '@draft-js-plugins/editor';\nimport { Box, Typography, IconButton } from '@material-ui/core';\nimport FavoriteOutlinedIcon from '@material-ui/icons/FavoriteOutlined';\nimport FavoriteBorderOutlinedIcon from '@material-ui/icons/FavoriteBorderOutlined';\nimport ModeCommentOutlinedIcon from '@material-ui/icons/ModeCommentOutlined';\nimport ShareIcon from '@material-ui/icons/Share';\nimport CreatePostModal from '../modals/CreatePost';\nimport Dropdown from '../dropdown/share';\nimport { Post } from '../../types';\nimport { useUpdatePostLike } from '../../lib/hooks/posts';\n\n// const useStyles = makeStyles((theme: Theme) =>\n//   createStyles({\n//   })\n// );\n\ninterface PostMetaProps {\n  post: Post;\n  page: number;\n  cacheKey: string | any[];\n}\n\nexport default function PostMeta({ post, page, cacheKey }: PostMetaProps) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [isModalOpen, setModal] = useState(false);\n  const editorRef = useRef<PluginEditor>(null);\n  //   const classes = useStyles();\n  const updateLike = useUpdatePostLike();\n\n  const handleDropdownClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  return (\n    <>\n      <Box display='flex' alignItems='center' justifyContent='space-around'>\n        {!post.parent && (\n          <IconButton\n            aria-label='add comment'\n            size='small'\n            onClick={() => {\n              setModal(true);\n              editorRef.current?.focus();\n            }}\n            style={{ marginRight: 16 }}\n          >\n            <Typography style={{ marginRight: 4 }}>\n              <small>{post.comments}</small>\n            </Typography>\n            <ModeCommentOutlinedIcon fontSize='small' />\n          </IconButton>\n        )}\n        <IconButton\n          aria-label='add to favorites'\n          size='small'\n          onClick={() =>\n            updateLike.mutate({\n              pageIndex: page,\n              post_id: post.id,\n              key: cacheKey,\n            })\n          }\n        >\n          <Typography style={{ marginRight: 4 }}>\n            <small>{post.likes}</small>\n          </Typography>\n          {post.isLiked ? (\n            <FavoriteOutlinedIcon color='primary' />\n          ) : (\n            <FavoriteBorderOutlinedIcon fontSize='small' />\n          )}\n        </IconButton>\n        <IconButton\n          aria-label='share on social media'\n          size='small'\n          onClick={handleDropdownClick}\n        >\n          <ShareIcon fontSize='small' />\n        </IconButton>\n      </Box>\n      <Dropdown\n      url={`/posts/${post.id}`}\n      tags={post.tags}\n        anchorEl={anchorEl}\n        closeMenu={() => setAnchorEl(null)}\n      />\n      <CreatePostModal\n        post_id={post.id}\n        editorRef={editorRef}\n        cacheKey={cacheKey}\n        isOpen={isModalOpen}\n        handleClose={() => setModal(false)}\n      />\n    </>\n  );\n}\n\nexport function PostPageMeta({\n  post,\n}: {\n  post: Pick<Post, 'created_on' | 'comments' | 'likes'>;\n}) {\n  return (\n    <Box\n      flexWrap='wrap'\n      display='flex'\n      alignItems='center'\n      justifyContent='space-between'\n      my={2}\n    >\n      <Box display='flex' alignItems='center'>\n        <Typography variant='body2' color='textSecondary' gutterBottom>\n          <strong>{post?.likes}</strong> {post?.likes === 1 ? 'like' : 'likes'}\n        </Typography>\n        <Typography\n          variant='body2'\n          color='textSecondary'\n          gutterBottom\n          style={{ marginLeft: 16 }}\n        >\n          <strong>{post?.comments}</strong>{' '}\n          {post?.comments === 1 ? 'comment' : 'comments'}\n        </Typography>\n      </Box>\n      <Typography color='textSecondary' component='span' gutterBottom>\n        <small>\n          {post &&\n            new Date(post?.created_on).toLocaleTimeString('en-gb', {\n              hour12: true,\n              hour: 'numeric',\n              weekday: 'long',\n              minute: 'numeric',\n              month: 'short',\n              day: 'numeric',\n              year: 'numeric',\n            })}\n        </small>\n      </Typography>\n    </Box>\n  );\n}\n","import React, { useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios, { AxiosResponse, AxiosError } from 'axios';\nimport PluginEditor from '@draft-js-plugins/editor';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { Box, IconButton } from '@material-ui/core';\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\nimport FavoriteOutlinedIcon from '@material-ui/icons/FavoriteOutlined';\nimport FavoriteBorderOutlinedIcon from '@material-ui/icons/FavoriteBorderOutlined';\nimport ModeCommentOutlinedIcon from '@material-ui/icons/ModeCommentOutlined';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport CreatePostModal from '../modals/CreatePost';\nimport DeleteModal from '../modals/DeletePost';\nimport Dropdown from '../dropdown/share';\nimport { APIError, Post } from '../../types';\nimport { useAuth } from '../../lib/hooks/user';\nimport { useDeletePost } from '../../lib/hooks/posts';\n\nexport default function PostFooter({\n  post,\n}: {\n  post: Pick<Post, 'author' | 'isLiked' | 'id' | 'tags'>;\n}) {\n  const [isCreatePostModalOpen, setCreatePostModal] = useState(false);\n  const [isDeleteModalOpen, setDeleteModal] = useState(false);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const editorRef = useRef<PluginEditor>(null);\n  const { postId } = useParams<{ postId: string }>();\n  const queryClient = useQueryClient();\n  const deletePost = useDeletePost();\n  const { data: user } = useAuth();\n\n  const handleDropdownClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const updateLike = useMutation(\n    async (postId: number) => {\n      const res: AxiosResponse<Post> = await axios.post(\n        `/posts/${postId}/likes`\n      );\n      return res.data;\n    },\n    {\n      onMutate: (postId: number) => {\n        // @ts-expect-error\n        return queryClient.setQueryData<Post>(`/posts/${postId}`, (post) => {\n          if (post) {\n            console.log(post);\n            if (post.isLiked) {\n              post.likes = post.likes - 1;\n              post.isLiked = false;\n            } else {\n              post.likes = post.likes + 1;\n              post.isLiked = true;\n            }\n          }\n          // console.log(post);\n          return post;\n        });\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.message);\n        // to error reporting service\n      },\n      onSettled: () => queryClient.invalidateQueries(['posts', postId]),\n    }\n  );\n\n  return (\n    <>\n      <Box display='flex' alignItems='center' justifyContent='space-around'>\n        <IconButton\n          aria-label={post.isLiked ? 'unlike post' : 'like post'}\n          onClick={() => updateLike.mutate(post.id)}\n        >\n          {post.isLiked ? (\n            <FavoriteOutlinedIcon color='primary' />\n          ) : (\n            <FavoriteBorderOutlinedIcon fontSize='small' />\n          )}\n        </IconButton>\n        <IconButton\n          aria-label='add comment'\n          onClick={() => {\n            setCreatePostModal(true);\n            editorRef.current?.focus();\n          }}\n        >\n          <ModeCommentOutlinedIcon fontSize='small' />\n        </IconButton>\n        <IconButton\n          aria-label='share on social media'\n          onClick={handleDropdownClick}\n        >\n          <ShareIcon fontSize='small' />\n        </IconButton>\n        {post.author.id === user?.id && (\n          <IconButton\n            aria-label='delete post'\n            onClick={() => setDeleteModal(true)}\n          >\n            <DeleteOutlinedIcon fontSize='small' />\n          </IconButton>\n        )}\n      </Box>\n      <Dropdown\n      url={`/posts/${post.id}`}\n      tags={post.tags}\n        anchorEl={anchorEl}\n        closeMenu={() => setAnchorEl(null)}\n      />\n      <CreatePostModal\n        editorRef={editorRef}\n        isOpen={isCreatePostModalOpen}\n        cacheKey={`/posts/${parseInt(postId)}/comments`}\n        post_id={post.id}\n        handleClose={() => setCreatePostModal(false)}\n      />\n      <DeleteModal\n        isOpen={isDeleteModalOpen}\n        handleClose={() => setDeleteModal(false)}\n        deletePost={() => deletePost.mutate(post!.id)}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core';\nimport { PostHeader, PostContent, PostMeta } from '../../components/Post';\nimport { Post } from '../../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      marginTop: 4,\n      padding: theme.spacing(2),\n      [theme.breakpoints.down('xs')]: {\n        padding: theme.spacing(2, 1),\n      },\n    },\n  })\n);\n\ninterface IProps {\n  cacheKey: string | any[];\n  page: number;\n  post: Post;\n}\n\nexport default function PostCard({ post, cacheKey, page }: IProps) {\n  const classes = useStyles();\n\n  return (\n    <Paper elevation={0} component='article' className={classes.paper}>\n      <PostHeader post={post} page={page} />\n      <PostContent post={post} />\n      <PostMeta post={post} page={page} cacheKey={cacheKey} />\n    </Paper>\n  );\n}\n","import React, { Fragment, useRef } from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport LoadMore from '../Loading';\nimport PostCard from '../cards/PostCard';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { CenteredLoading } from '../Loading';\nimport { useInfinitePosts } from '../../lib/hooks/posts';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: any;\n  value: any;\n  type: string;\n}\n\nexport const TabPanel = (props: TabPanelProps) => {\n  const { children, value, index, type, ...other } = props;\n\n  return (\n    <div\n      role='tabpanel'\n      hidden={value !== index}\n      id={`${type}-tab`}\n      aria-labelledby={`${type}-tab`}\n      {...other}\n    >\n      {value === index && children}\n    </div>\n  );\n};\n\nexport const a11yProps = (type: string) => ({\n  id: `${type}-tab`,\n  'aria-controls': `${type}-tabpanel`,\n});\n\ninterface TabProps {\n  url: string;\n  cacheKey: string | any[];\n}\n\nexport default function TabChild({ url, cacheKey }: TabProps) {\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const {\n    data,\n    error,\n    isLoading,\n    isError,\n    hasNextPage,\n    isFetchingNextPage,\n    fetchNextPage,\n  } = useInfinitePosts(cacheKey, url);\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  return (\n    <>\n      {isLoading ? (\n        <CenteredLoading />\n      ) : isError ? (\n        <Box py={4}>\n          <Typography color='textSecondary' align='center'>\n            {error?.response?.data.message}\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          {data?.pages.map((page, i) => (\n            <Fragment key={i}>\n              {page.data.map((post, idx) => (\n                <Fragment key={idx}>\n                  <PostCard post={post} page={i} cacheKey={cacheKey} />\n                </Fragment>\n              ))}\n            </Fragment>\n          ))}\n          <LoadMore\n            fullWidth\n            resource='posts'\n            iconSize={24}\n            ref={loadMoreRef}\n            hasNextPage={hasNextPage}\n            isFetchingNextPage={isFetchingNextPage}\n            fetchNextPage={() => fetchNextPage()}\n            style={{ textTransform: 'capitalize' }}\n          />\n        </>\n      )}\n    </>\n  );\n}\n","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Box from '@material-ui/core/Box';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core';\n\nimport Header from '../../components/Header';\nimport Page from '../../components/Page';\nimport TabChild, { a11yProps, TabPanel } from '../../components/tabs';\nimport { KEYS } from '../../lib/constants';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    appbar: {\n      boxShadow: theme.shadows[0],\n      backgroundColor: theme.palette.background.paper,\n    },\n    tab: {\n      textTransform: 'capitalize',\n    },\n  })\n);\n\nexport default function Home() {\n  const [value, setValue] = React.useState(0);\n  const classes = useStyles();\n  const key =\n    value === 1 ? [KEYS.HOME_FEED, 'top'] : [KEYS.HOME_FEED, 'latest'];\n\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n    setValue(newValue);\n  };\n\n  return (\n    <Page cacheKey={key} title='Home'>\n      <Header avatar title='home' />\n      <Box flexGrow={1} mt={0.5}>\n        <AppBar position='static' className={classes.appbar}>\n          <Tabs\n            value={value}\n            onChange={handleChange}\n            aria-label='Tag Tab'\n            textColor='primary'\n            indicatorColor='primary'\n            variant='fullWidth'\n          >\n            <Tab\n              label='Latest'\n              {...a11yProps('latest')}\n              className={classes.tab}\n            />\n            <Tab label='Top' {...a11yProps('top')} className={classes.tab} />\n          </Tabs>\n        </AppBar>\n        <TabPanel type='latest' value={value} index={0}>\n          <TabChild cacheKey={key} url={`/posts?latest=true`} />\n        </TabPanel>\n        <TabPanel value={value} index={1} type='top'>\n          <TabChild cacheKey={key} url={`/posts?top=true`} />\n        </TabPanel>\n      </Box>\n    </Page>\n  );\n}\n","import React, { useRef } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport Divider from '@material-ui/core/Divider';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport Header from '../../components/Header';\nimport LoadMore from '../../components/Loading';\nimport Page from '../../components/Page';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { CenteredLoading } from '../../components/Loading';\nimport { KEYS } from '../../lib/constants';\nimport { useFollowTag, useTagsToFollow } from '../../lib/hooks/user';\nimport { Tag } from '../../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    title: {\n      padding: theme.spacing(2),\n    },\n    root: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      justifyContent: 'space-between',\n      padding: theme.spacing(2),\n      borderBottom: `1px solid ${theme.palette.secondary.main}`,\n      '&:hover': {\n        backgroundColor: theme.palette.secondary.light,\n      },\n    },\n    button: {\n      marginLeft: theme.spacing(1),\n      textTransform: 'lowercase',\n    },\n  })\n);\n\nexport default function Explore() {\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const classes = useStyles();\n  const followTag = useFollowTag();\n  const {\n    data,\n    error,\n    isLoading,\n    isError,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useTagsToFollow();\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  const aboutTag = (tag: Tag) => {\n    const users = tag.followedBy.users;\n    const count = tag.followedBy.count;\n    if (users.length === 1) return `Followed by ${users[0].profile.name}`;\n    if (users.length === 2 && count === 0)\n      return `Followed by ${users[0].profile.name} and ${users[1].profile.name}`;\n\n    return `Followed by ${users[0].profile.name}, ${users[1].profile.name} and ${count} others you follow.`;\n  };\n\n  return (\n    <Page title='Explore' description='Search for tags and users.'>\n      <Header back search />\n      <Paper elevation={0} style={{ marginTop: 4 }}>\n        <Typography className={classes.title}>\n          <strong>Popular Tags</strong>\n        </Typography>\n        <Divider />\n        {isLoading ? (\n          <CenteredLoading />\n        ) : isError ? (\n          <Box py={4}>\n            <Typography color='textSecondary' align='center'>\n              {error?.response?.data.message}\n            </Typography>\n          </Box>\n        ) : (\n          <>\n            {data?.pages.map((page, i) => (\n              <React.Fragment key={i}>\n                {page.data.map((tag) => (\n                  <React.Fragment key={tag.id}>\n                    <div className={classes.root}>\n                      <Link\n                        underline='none'\n                        to={`/tags/${tag.name}`}\n                        component={RouterLink}\n                      >\n                        <Typography\n                          noWrap\n                          color='textPrimary'\n                          variant='subtitle1'\n                        >\n                          <strong>#{tag.name}</strong>\n                        </Typography>\n                        <Typography color='textPrimary' variant='body2'>\n                          {aboutTag(tag)}\n                        </Typography>\n                      </Link>\n                      <Button\n                        variant='outlined'\n                        color='primary'\n                        size='small'\n                        className={classes.button}\n                        onClick={() =>\n                          followTag.mutate({\n                            tag_id: tag.id,\n                            pageIndex: i,\n                            key: KEYS.TAG_TO_FOLLOW,\n                          })\n                        }\n                      >\n                        {tag.isFollowing ? 'unfollow' : 'follow'}\n                      </Button>\n                    </div>\n                  </React.Fragment>\n                ))}\n              </React.Fragment>\n            ))}\n            <LoadMore\n              fullWidth\n              resource='tags'\n              iconSize={16}\n              ref={loadMoreRef}\n              hasNextPage={hasNextPage}\n              isFetchingNextPage={isFetchingNextPage}\n              fetchNextPage={() => fetchNextPage()}\n              style={{ textTransform: 'capitalize' }}\n            />\n          </>\n        )}\n      </Paper>\n    </Page>\n  );\n}\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport { Notification } from '../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    listItemAvatar: {\n      [theme.breakpoints.down('xs')]: {\n        minWidth: 40,\n      },\n    },\n    avatar: {\n      [theme.breakpoints.down('xs')]: {\n        width: 32,\n        height: 32,\n      },\n    },\n    gutters: {\n      [theme.breakpoints.between('md', 'lg')]: {\n        paddingRight: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n      },\n      [theme.breakpoints.down('xs')]: {\n        paddingRight: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n      },\n    },\n  })\n);\n\nexport default function NotifCard({ notif }: { notif: Notification }) {\n  const classes = useStyles();\n  const history = useHistory();\n\n  let notificatn: { link: string; text: string };\n  switch (notif.subject) {\n    case 'message':\n      notificatn = {\n        text: 'sent you a message.',\n        link: `/messages/${notif.user.profile?.username}`,\n      };\n      break;\n    case 'follow':\n      notificatn = {\n        text: 'started following you.',\n        link: `/${notif.user.profile?.username}`,\n      };\n      break;\n    case 'comment':\n      notificatn = {\n        text: 'commented on your post.',\n        link: `/posts/${notif.item_id}`,\n      };\n      break;\n    case 'like':\n      notificatn = {\n        text: 'liked your post',\n        link: `/posts/${notif.item_id}`,\n      };\n      break;\n    default:\n      notificatn = {\n        text: 'recently added a post.',\n        link: `/posts/${notif.item_id}`,\n      };\n      break;\n  }\n\n  return (\n    <ListItem\n      button\n      classes={{ gutters: classes.gutters }}\n      onClick={() => history.push(notificatn.link)}\n    >\n      <ListItemAvatar className={classes.listItemAvatar}>\n        <Avatar\n          alt='Profile Picture'\n          src={notif.user.profile?.avatar}\n          className={classes.avatar}\n        />\n      </ListItemAvatar>\n      <ListItemText\n        primary={\n          <>\n            <Typography variant='body2' component='p'>\n              <strong>{notif.user.profile?.name}</strong> &nbsp;\n              {notificatn.text}\n            </Typography>\n            <Typography color='textSecondary' gutterBottom noWrap>\n              <small>\n                {new Date(notif.timestamp).toLocaleDateString('en-gb', {\n                  hour12: true,\n                  hour: 'numeric',\n                  weekday: 'short',\n                  minute: 'numeric',\n                  month: 'numeric',\n                  day: 'numeric',\n                  year: 'numeric',\n                })}\n              </small>\n            </Typography>\n          </>\n        }\n        secondary={\n          <>\n            {notif.post && (\n              <Typography variant='body2'>{notif.post.body}</Typography>\n            )}\n          </>\n        }\n      />\n    </ListItem>\n  );\n}\n","import React, { Fragment, useRef } from 'react';\nimport List from '@material-ui/core/List';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { Box } from '@material-ui/core';\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport Header from '../../components/Header';\nimport LoadMore from '../../components/Loading';\nimport NotificationCard from '../../components/NotifCard';\nimport Page from '../../components/Page';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { CenteredLoading } from '../../components/Loading';\nimport { useInfiniteNotifications } from '../../lib/hooks/notifs';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      margin: '4px 0',\n      padding: theme.spacing(1, 0, 2),\n    },\n  })\n);\n\nexport default function Notifications() {\n  const classes = useStyles();\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const {\n    data,\n    error,\n    isError,\n    isLoading,\n    fetchNextPage,\n    isFetchingNextPage,\n    hasNextPage,\n  } = useInfiniteNotifications();\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  return (\n    <Page title='Notifications'>\n      <Header back title='Notifications' />\n      {isLoading ? (\n        <CenteredLoading />\n      ) : isError ? (\n        <Box py={4}>\n          <Typography color='textSecondary' align='center'>\n            {error?.response?.data.message}\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          <Paper square elevation={0} className={classes.paper}>\n            <List disablePadding>\n              {data?.pages.map((page, i) => (\n                <Fragment key={i}>\n                  {page.data.map((notif, idx) => (\n                    <Fragment key={idx}>\n                      <NotificationCard notif={notif} />\n                    </Fragment>\n                  ))}\n                </Fragment>\n              ))}\n            </List>\n          </Paper>\n          <LoadMore\n            fullWidth\n            resource='posts'\n            iconSize={16}\n            ref={loadMoreRef}\n            hasNextPage={hasNextPage}\n            isFetchingNextPage={isFetchingNextPage}\n            fetchNextPage={() => fetchNextPage()}\n            style={{ textTransform: 'capitalize' }}\n          />\n        </>\n      )}\n    </Page>\n  );\n}\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { InfiniteData } from 'react-query';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport { Box } from '@material-ui/core';\nimport {\n  createStyles,\n  Theme,\n  makeStyles,\n  withStyles,\n} from '@material-ui/core/styles';\nimport { InfiniteMessageResponse } from '../types';\n\nconst StyledBadge = withStyles((theme: Theme) =>\n  createStyles({\n    badge: {\n      backgroundColor: '#44b700',\n      color: '#44b700',\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\n      '&::after': {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        borderRadius: '50%',\n        animation: '$ripple 1.2s infinite ease-in-out',\n        border: '1px solid currentColor',\n        content: '\"\"',\n      },\n    },\n    '@keyframes ripple': {\n      '0%': {\n        transform: 'scale(.8)',\n        opacity: 1,\n      },\n      '100%': {\n        transform: 'scale(2.4)',\n        opacity: 0,\n      },\n    },\n  })\n)(Badge);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    listItemAvatar: {\n      [theme.breakpoints.down('xs')]: {\n        minWidth: 40,\n      },\n    },\n    avatar: {\n      [theme.breakpoints.down('xs')]: {\n        width: 32,\n        height: 32,\n      },\n    },\n    gutters: {\n      [theme.breakpoints.between('md', 'lg')]: {\n        paddingRight: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n      },\n      [theme.breakpoints.down('xs')]: {\n        paddingRight: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n      },\n    },\n  })\n);\n\ninterface MessageProps {\n  data: InfiniteData<InfiniteMessageResponse> | undefined;\n}\n\nexport default function Messages({ data }: MessageProps) {\n  const classes = useStyles();\n  const history = useHistory();\n\n  return (\n    <List disablePadding>\n      {data?.pages.map((page, i) => (\n        <React.Fragment key={i}>\n          {page.data.map((message, idx) => (\n            <React.Fragment key={idx}>\n              <ListItem\n                button\n                divider\n                classes={{ gutters: classes.gutters }}\n                onClick={() =>\n                  history.push(`/messages/${message.user?.profile.username}`)\n                }\n              >\n                <ListItemAvatar className={classes.listItemAvatar}>\n                  {!message.isRead ? (\n                    <StyledBadge\n                      overlap='circle'\n                      anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right',\n                      }}\n                      variant='dot'\n                    >\n                      <Avatar\n                        alt='Profile Picture'\n                        src={message.user?.profile.avatar}\n                        className={classes.avatar}\n                      />\n                    </StyledBadge>\n                  ) : (\n                    <Avatar\n                      alt='Profile Picture'\n                      src={message.user?.profile.avatar}\n                      className={classes.avatar}\n                    />\n                  )}\n                </ListItemAvatar>\n                <ListItemText\n                  primary={\n                    <Box display='flex' alignItems='center'>\n                      <Box\n                        display='flex'\n                        alignItems='center'\n                        flex={1}\n                        minWidth={0}\n                      >\n                        <Typography style={{ whiteSpace: 'nowrap' }}>\n                          {message.user?.profile.name}\n                        </Typography>\n                        <Typography\n                          variant='body2'\n                          color='textSecondary'\n                          noWrap\n                          style={{ margin: '0 8px' }}\n                        >\n                          {`@${message.user?.profile.username}`}\n                        </Typography>\n                      </Box>\n                      <Typography variant='body2' color='textSecondary' noWrap>\n                        {new Date(message.created_on).toLocaleDateString(\n                          'en-us',\n                          {\n                            month: 'numeric',\n                            day: 'numeric',\n                            year: 'numeric',\n                          }\n                        )}\n                      </Typography>\n                    </Box>\n                  }\n                  secondary={\n                    <Typography noWrap variant='body2'>\n                      {message.body}\n                    </Typography>\n                  }\n                />\n              </ListItem>\n            </React.Fragment>\n          ))}\n        </React.Fragment>\n      ))}\n    </List>\n  );\n}\n","import axios, { AxiosError, AxiosResponse } from 'axios';\nimport { useInfiniteQuery, useMutation, useQueryClient } from 'react-query';\nimport { InfiniteMessageResponse, APIError, Message } from '../../types';\nimport { KEYS, REFETCH_INTERVAL } from '../constants';\nimport { setAuthToken } from '../axiosConfig';\n\ntype Args = {\n  pages: InfiniteMessageResponse[];\n  pageParams: unknown;\n};\n\nexport function useInfiniteMessages() {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useInfiniteQuery<InfiniteMessageResponse, AxiosError<APIError>>(\n    KEYS.MESSAGES_KEY,\n    async ({ pageParam = 0 }) => {\n      const res: AxiosResponse<InfiniteMessageResponse> = await axios.get(\n        `/chats?cursor=${pageParam}`\n      );\n      return res.data;\n    },\n    {\n      getNextPageParam: (lastPage) => lastPage.nextCursor ?? false,\n    }\n  );\n}\n\nexport function useInfiniteChatMessages(username: string) {\n  localStorage.token && setAuthToken(localStorage.token);\n\n  return useInfiniteQuery<InfiniteMessageResponse, AxiosError<APIError>>(\n    [KEYS.CHAT_KEY, username],\n    async ({ pageParam = 0 }) => {\n      const res: AxiosResponse<InfiniteMessageResponse> = await axios.get(\n        `/messages?username=${username}&cursor=${pageParam}`\n      );\n      return res.data;\n    },\n    {\n      refetchInterval: REFETCH_INTERVAL,\n      getNextPageParam: (lastPage) => lastPage.nextCursor ?? false,\n    }\n  );\n}\n\nexport function useSendMessage() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async ({\n      message,\n      to,\n    }: {\n      message: string;\n      to: { id: number; username: string };\n      from?: number;\n    }) => {\n      const res: AxiosResponse<Message> = await axios.post(\n        `/messages?user=${to.id}`,\n        { body: message }\n      );\n      return res.data;\n    },\n    {\n      onMutate: ({ message, from, to }) => {\n        queryClient.setQueryData<Args>(\n          [KEYS.CHAT_KEY, to.username],\n          // @ts-expect-error\n          (oldData) => ({\n            pageParams: oldData?.pageParams,\n            pages: oldData?.pages.map((page, i) => {\n              if (i === 0)\n                return {\n                  nextCursor: page.nextCursor,\n                  data: [\n                    {\n                      id: new Date().getTime(),\n                      body: message,\n                      author_id: from,\n                      isRead: false,\n                      created_on: new Date(Date.now()).toLocaleDateString(\n                        'en-us',\n                        {\n                          hour12: true,\n                          hour: 'numeric',\n                          minute: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          year: 'numeric',\n                        }\n                      ),\n                    },\n                    ...page.data,\n                  ],\n                };\n              return page;\n            }),\n          })\n        );\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.message);\n        // to error reporting service\n      },\n      onSettled: (_d, _e, { to }) =>\n        queryClient.invalidateQueries([KEYS.CHAT_KEY, to.username]),\n    }\n  );\n}\n\nexport function useDeleteMessage() {\n  localStorage.token && setAuthToken(localStorage.token);\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async ({\n      msg_id,\n      userOnly,\n    }: {\n      pageIndex: number;\n      msg_id: number;\n      username?: string;\n      userOnly?: boolean;\n    }) => {\n      const res: AxiosResponse<{ message: string }> = await axios.delete(\n        `/messages/${msg_id}${userOnly ? '?userOnly=true' : ''}`\n      );\n      return res.data;\n    },\n    {\n      onMutate: ({ msg_id, pageIndex, username }) => {\n        // @ts-expect-error\n        queryClient.setQueryData<Args>([KEYS.CHAT_KEY, username], (oldData) => {\n          const page = oldData?.pages[pageIndex];\n\n          if (page) {\n            const newPage = page.data.filter(\n              (message) => message.id !== msg_id\n            );\n            console.log(newPage);\n\n            oldData?.pages.splice(pageIndex, 1, {\n              data: newPage,\n              nextCursor: page?.nextCursor,\n            });\n          }\n          console.log(oldData);\n          return oldData;\n        });\n      },\n      onError: (error: AxiosError<APIError>) => {\n        console.log('Error: ', error.response?.data.message);\n        // to error reporting service\n      },\n      onSettled: (_d, _e, { username }) => {\n        queryClient.invalidateQueries([KEYS.CHAT_KEY, username]);\n        queryClient.invalidateQueries(KEYS.MESSAGES_KEY);\n      },\n    }\n  );\n}\n","import { useRef } from 'react';\nimport { useQueryClient } from 'react-query';\nimport Typography from '@material-ui/core/Typography';\nimport { Hidden, Grid, Box, Container, Paper } from '@material-ui/core';\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport Head from '../../components/Head';\nimport Header from '../../components/Header';\nimport LoadMore from '../../components/Loading';\nimport Messages from '../../components/Messages';\nimport Sidebar from '../../components/Sidebar';\nimport { CenteredLoading } from '../../components/Loading';\nimport { KEYS } from '../../lib/constants';\nimport { useInfiniteMessages } from '../../lib/hooks/messages';\nimport { User } from '../../types';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    main: {\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: 104,\n      },\n      [theme.breakpoints.up('lg')]: {\n        marginLeft: 244,\n      },\n    },\n    paper: {\n      margin: '4px 0',\n      overflow: 'auto',\n      height: 'calc(100vh - 54px - 4px - 4px)',\n      padding: theme.spacing(1, 0, 2),\n    },\n  })\n);\n\nexport default function Message() {\n  const classes = useStyles();\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const queryClient = useQueryClient();\n  const auth = queryClient.getQueryData<User>(KEYS.AUTH);\n  const {\n    data,\n    error,\n    isError,\n    isLoading,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfiniteMessages();\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  return (\n    <>\n      <Head title='Chats' description={auth?.profile.name} />\n      <Container maxWidth='xl' disableGutters>\n      <Hidden xsDown>\n        <Sidebar user={auth} />\n      </Hidden>\n      <div className={classes.main}>\n        <Grid container spacing={1}>\n          <Grid item xs={12} md={6}>\n            <Header title='Messages' back search />\n            <Paper square elevation={0} className={classes.paper}>\n              {isLoading ? (\n                <CenteredLoading />\n              ) : isError ? (\n                <Box py={4}>\n                  <Typography color='textSecondary' align='center'>\n                    {error?.response?.data.message}\n                  </Typography>\n                </Box>\n              ) : (\n                <>\n                  <Messages data={data} />\n                  <LoadMore\n                    fullWidth\n                    iconSize={24}\n                    ref={loadMoreRef}\n                    hasNextPage={hasNextPage}\n                    isFetchingNextPage={isFetchingNextPage}\n                    fetchNextPage={() => fetchNextPage()}\n                    style={{ textTransform: 'capitalize' }}\n                  />\n                </>\n              )}\n            </Paper>\n          </Grid>\n          <Hidden smDown>\n            <Grid\n              item\n              xs={12}\n              md={6}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              <Typography variant='h6'>\n                Click on a chat to display it here.\n              </Typography>\n            </Grid>\n          </Hidden>\n        </Grid>\n      </div>\n    </Container>\n    </>\n  );\n}\n","import { useRef, Fragment } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { Divider } from '@material-ui/core';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from '@material-ui/core/styles';\n\nimport Header from '../../components/Header';\nimport LoadMore from '../../components/Loading';\nimport Page from '../../components/Page';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { CenteredLoading } from '../../components/Loading';\nimport {\n  PostHeader,\n  PostContent,\n  PostPageMeta,\n  PostFooter,\n  PostMeta,\n} from '../../components/Post';\nimport { useAuth } from '../../lib/hooks/user';\nimport { useInfinitePosts, usePost } from '../../lib/hooks/posts';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      marginTop: 4,\n      padding: theme.spacing(2),\n      [theme.breakpoints.down('xs')]: {\n        padding: theme.spacing(2, 1),\n      },\n    },\n  })\n);\n\nexport default function PostPage() {\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n\n  const theme = useTheme();\n  const classes = useStyles();\n  const { postId } = useParams<{ postId: string }>();\n  const { data: post, isLoading, isError, error } = usePost(parseInt(postId));\n  const { data: user } = useAuth();\n\n  const {\n    data: comments,\n    error: commentsError,\n    isLoading: commentsLoading,\n    isError: commentsIsError,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfinitePosts(\n    `/posts/${postId}/comments`,\n    `/posts/${postId}/comments?`\n  );\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  return (\n    <Page title='Post'>\n      <Header back title='Post' user={user} />\n      <Paper\n        elevation={0}\n        component='article'\n        style={{\n          marginTop: 4,\n          padding: theme.spacing(2),\n        }}\n      >\n        {isLoading ? (\n          <CenteredLoading />\n        ) : isError ? (\n          <Box py={4}>\n            <Typography color='textSecondary' align='center'>\n              {error?.response?.data.message}\n            </Typography>\n          </Box>\n        ) : (\n          <>\n            {post && (\n              <>\n                <PostHeader post={post} />\n                <PostContent post={post} postPage />\n                <PostPageMeta post={post} />\n                <Divider />\n                <PostFooter post={post} />\n              </>\n            )}\n          </>\n        )}\n      </Paper>\n      {commentsLoading ? (\n        <CenteredLoading />\n      ) : commentsIsError ? (\n        <Box py={4}>\n          <Typography color='textSecondary' align='center'>\n            {commentsError?.response?.data.message}\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          {comments?.pages.map((page, i) => (\n            <Fragment key={i}>\n              {page.data.map((comment, idx) => (\n                <Fragment key={idx}>\n                  <Paper\n                    elevation={0}\n                    component='article'\n                    className={classes.paper}\n                  >\n                    <PostHeader post={comment} page={i} />\n                    <PostContent post={comment} />\n                    <PostMeta\n                      post={comment}\n                      page={i}\n                      cacheKey={`/posts/${parseInt(postId)}/comments`}\n                    />\n                  </Paper>\n                </Fragment>\n              ))}\n            </Fragment>\n          ))}\n          <LoadMore\n            fullWidth\n            resource='comments'\n            iconSize={24}\n            ref={loadMoreRef}\n            hasNextPage={hasNextPage}\n            isFetchingNextPage={isFetchingNextPage}\n            fetchNextPage={() => fetchNextPage()}\n            style={{ textTransform: 'capitalize' }}\n          />\n        </>\n      )}\n    </Page>\n  );\n}\n","import React, { useState } from 'react';\nimport { Link as RouterLink, useParams } from 'react-router-dom';\nimport { useQueryClient } from 'react-query';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport CakeOutlinedIcon from '@material-ui/icons/CakeOutlined';\nimport CalendarTodayOutlinedIcon from '@material-ui/icons/CalendarTodayOutlined';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { User } from '../../types';\nimport { KEYS } from '../../lib/constants';\nimport { useFollowUser } from '../../lib/hooks/user';\nimport EditProfileModal from '../modals/EditProfile';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      margin: '4px 0',\n      padding: theme.spacing(1, 1, 2),\n    },\n    avatar: {\n      width: 60,\n      height: 60,\n      border: `2px solid ${theme.palette.primary.main}`,\n      [theme.breakpoints.up('sm')]: {\n        width: 80,\n        height: 80,\n      },\n    },\n    flex: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    button: {\n      marginRight: theme.spacing(1),\n      color: theme.palette.text.primary,\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    marginRight: {\n      marginRight: theme.spacing(1),\n    },\n  })\n);\n\ninterface IProps {\n  user: User;\n  page?: number;\n  cacheKey: string | any[];\n  meta?: boolean\n}\n\nexport default function ProfileCard({ user, page, meta, cacheKey }: IProps) {\n  const [isOpen, setModalOpen] = useState(false)\n  const classes = useStyles();\n  const { username } = useParams<{ username: string }>();\n  const follow = useFollowUser();\n  const queryClient = useQueryClient();\n  const auth = queryClient.getQueryData<User>(KEYS.AUTH);\n\n  return (\n    <>\n    <Paper elevation={0} classes={{ root: classes.paper }}>\n      <Box display='flex'>\n        <Avatar\n          src={user.profile.avatar}\n          alt={`${user.profile.username} gravatar`}\n          className={classes.avatar}\n        />\n        <Box display='flex' flexDirection='column' flexGrow={1} ml={1}>\n          <Box display='flex' alignItems='center' mb={1}>\n            <Box display='flex' flexDirection='column' flexGrow={1} mr={1}>\n              <Typography\n                variant='subtitle2'\n                component='h6'\n                noWrap\n                style={{ fontWeight: 600 }}\n              >\n                {user.profile.name}\n              </Typography>\n              <Typography\n                color='textSecondary'\n                variant='subtitle2'\n                component='h6'\n                noWrap\n              >\n                {user && `@${user.profile.username}`}\n              </Typography>{' '}\n            </Box>\n            {auth?.id === user.id ? (\n              <Button\n                variant='outlined'\n                color='primary'\n                aria-controls='edit profile'\n                aria-haspopup='true'\n                size='small'\n                disableElevation\n                style={{ textTransform: 'capitalize' }}\n                onClick={() => setModalOpen(true)}\n              >\n                Edit Profile\n              </Button>\n            ) : !user.isFollowing ? (\n              <Button\n                variant='outlined'\n                color='primary'\n                aria-controls='follow this user'\n                aria-haspopup='true'\n                size='small'\n                disableElevation\n                style={{ textTransform: 'capitalize' }}\n                onClick={() =>\n                  follow.mutate({\n                    user_id: user.id,\n                    key: cacheKey,\n                    pageIndex: page,\n                    follow: user.isFollowing,\n                  })\n                }\n              >\n                follow\n              </Button>\n            ) : (\n              <Button\n                variant='outlined'\n                color='primary'\n                size='small'\n                disableElevation\n                style={{ textTransform: 'capitalize' }}\n                onClick={() =>\n                  follow.mutate({\n                    user_id: user.id,\n                    key: cacheKey,\n                    pageIndex: page,\n                    follow: user.isFollowing,\n                  })\n                }\n              >\n                following\n              </Button>\n            )}\n          </Box>\n          <Typography variant='body2' component='p' paragraph>\n            {user ? `${user.profile.bio}` : ''}\n          </Typography>\n          {meta && (\n              <>\n          <Box display='flex' alignItems='center'>\n            <Typography\n              variant='body2'\n              component='p'\n              color='textSecondary'\n              gutterBottom\n              className={classes.flex}\n            >\n              <CalendarTodayOutlinedIcon\n                fontSize='small'\n                className={classes.marginRight}\n              />{' '}\n              joined:{' '}\n              {user &&\n                new Date(user.profile.created_on).toLocaleDateString('en-gb', {\n                  month: 'short',\n                  year: 'numeric',\n                  timeZone: 'utc',\n                })}\n            </Typography>\n            <Typography\n              variant='body2'\n              component='p'\n              color='textSecondary'\n              gutterBottom\n              style={{ marginLeft: 16 }}\n              className={classes.flex}\n            >\n              <CakeOutlinedIcon\n                fontSize='small'\n                className={classes.marginRight}\n              />{' '}\n              {user && user.profile.dob\n                ? 'dob: ' +\n                  new Date(user.profile.dob).toLocaleDateString('en-gb', {\n                    month: 'short',\n                    day: 'numeric',\n                    timeZone: 'utc',\n                  })\n                : ''}\n            </Typography>\n          </Box>\n          <Box display='flex' alignItems='center'>\n            <Typography variant='body2' component='p' color='textSecondary'>\n              <Link\n                color='inherit'\n                to={`/${username}/followers`}\n                component={RouterLink}\n              >\n                <span className={classes.button}>{`${user.followers}`}</span>\n                Followers\n              </Link>\n              <Link\n                color='inherit'\n                to={`/${username}/following`}\n                component={RouterLink}\n                style={{ marginLeft: 24 }}\n              >\n                <span className={classes.button}>{`${user.following}`}</span>\n                Following\n              </Link>\n            </Typography>\n          </Box>\n            </>)}</Box>\n      </Box>\n    </Paper>\n    <EditProfileModal isOpen={isOpen} user={user} handleClose={() => setModalOpen(false)} />\n    </>\n  );\n}\n","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport AppBar from '@material-ui/core/AppBar';\nimport Box from '@material-ui/core/Box';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport Header from '../../components/Header';\nimport Page from '../../components/Page';\nimport ProfileCard from '../../components/cards/ProfileCard';\nimport TabChild, { a11yProps, TabPanel } from '../../components/tabs';\nimport { KEYS } from '../../lib/constants';\nimport { useUser } from '../../lib/hooks/user';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    appbar: {\n      boxShadow: theme.shadows[0],\n      backgroundColor: theme.palette.background.paper,\n    },\n    tab: {\n      textTransform: 'capitalize',\n    },\n  })\n);\n\nexport default function Tag() {\n  const [value, setValue] = React.useState(0);\n  const classes = useStyles();\n  const { username } = useParams<{ username: string }>();\n  const { data: user } = useUser(username);\n\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n    setValue(newValue);\n  };\n\n  let key: string | any[];\n  switch (value) {\n    case 1:\n      key = [KEYS.USER_PROFILE, 'comments'];\n      break;\n    case 2:\n      key = [KEYS.USER_PROFILE, 'likes'];\n      break;\n    default:\n      key = [KEYS.USER_PROFILE, 'posts'];\n  }\n\n  return (\n    <Page cacheKey={key} title='Profile' description={user?.profile.name}>\n      <Header back title={`${user?.profile.name} `} />\n      {user && (\n        <ProfileCard meta user={user} cacheKey={[KEYS.USER, user.profile.username]} />\n      )}\n      <Box flexGrow={1} mt={0.5}>\n        <AppBar position='static' className={classes.appbar}>\n          <Tabs\n            value={value}\n            onChange={handleChange}\n            aria-label='Tag Tab'\n            textColor='primary'\n            indicatorColor='primary'\n            variant='fullWidth'\n          >\n            <Tab\n              label='Posts'\n              {...a11yProps('posts')}\n              className={classes.tab}\n            />\n            <Tab\n              label='Replies'\n              {...a11yProps('replies')}\n              className={classes.tab}\n            />\n            <Tab\n              label='Favorites'\n              {...a11yProps('likes')}\n              className={classes.tab}\n            />\n          </Tabs>\n        </AppBar>\n        <TabPanel type='posts' value={value} index={0}>\n          <TabChild cacheKey={key} url={`/users/${username}/posts?`} />\n        </TabPanel>\n        <TabPanel type='replies' value={value} index={1}>\n          <TabChild cacheKey={key} url={`/users/${username}/comments?`} />\n        </TabPanel>\n        <TabPanel value={value} index={2} type='likes'>\n          <TabChild cacheKey={key} url={`/users/${username}/likes?`} />\n        </TabPanel>\n      </Box>\n    </Page>\n  );\n}\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport {\n  makeStyles,\n  createStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    toolbar: {\n      width: \"100%\",\n      display: \"flex\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    button: {\n      width: \"100%\",\n      textTransform: \"capitalize\",\n      minHeight: \"54px\",\n      fontWeight: theme.typography.fontWeightBold,\n      padding: theme.spacing(2),\n      transition: theme.transitions.create(\"all\"),\n      color: theme.palette.text.secondary,\n      \"&:hover\": {\n        color: theme.palette.primary.main,\n      },\n    },\n  })\n);\n\nexport default function FollowTab({ username }: { username?: string }) {\n  return (\n    <AppBar position=\"static\" color=\"default\" elevation={0}>\n      <Toolbar>\n        <TabLink label=\"followers\" to={`/${username}/followers`} />\n        <TabLink label=\"following\" to={`/${username}/following`} />\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nfunction TabLink({ to, label }: { to: string; label: string }) {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  return (\n    <ButtonBase\n      focusRipple\n      className={classes.button}\n      component={NavLink}\n      activeStyle={{\n        color: theme.palette.primary.main,\n      }}\n      to={to}\n    >\n      {label}\n    </ButtonBase>\n  );\n}\n","import React, { Fragment, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\n\nimport FollowTab from '../../components/tabs/Follow';\nimport Header from '../../components/Header';\nimport LoadMore from '../../components/Loading';\nimport Page from '../../components/Page';\nimport ProfileCard from '../../components/cards/ProfileCard';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { CenteredLoading } from '../../components/Loading';\nimport { useInfiniteUsers, useUser } from '../../lib/hooks/user';\n\nexport default function FollowersTab() {\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const { username } = useParams<{ username: string }>();\n  const { data: user } = useUser(username);\n  const {\n    data,\n    error,\n    isError,\n    isLoading,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfiniteUsers(`/users/${username}/followers`);\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  return (\n    <Page title='Followers' description={user?.profile.name}>\n      <Header\n        back\n        title={`${user?.profile.name}`}\n        user={user}\n        meta={`${user?.followers} followers`}\n      />\n      <FollowTab username={username} />\n      {isLoading ? (\n        <CenteredLoading />\n      ) : isError ? (\n        <Box py={4}>\n          <Typography color='textSecondary' align='center'>\n            {error?.response?.data.message}\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          {data?.pages.map((page, i) => (\n            <Fragment key={i}>\n              {page.data.map((followers, idx) => (\n                <Fragment key={idx}>\n                  <ProfileCard\n                    user={followers}\n                    page={i}\n                    cacheKey={`/users/${username}/followers`}\n                  />\n                </Fragment>\n              ))}\n            </Fragment>\n          ))}\n          <LoadMore\n            fullWidth\n            resource='followers'\n            iconSize={16}\n            ref={loadMoreRef}\n            hasNextPage={hasNextPage}\n            isFetchingNextPage={isFetchingNextPage}\n            fetchNextPage={() => fetchNextPage()}\n            style={{ textTransform: 'capitalize' }}\n          />\n        </>\n      )}\n    </Page>\n  );\n}\n","import React, { Fragment, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\n\nimport FollowTab from '../../components/tabs/Follow';\nimport Header from '../../components/Header';\nimport LoadMore from '../../components/Loading';\nimport Page from '../../components/Page';\nimport ProfileCard from '../../components/cards/ProfileCard';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { CenteredLoading } from '../../components/Loading';\nimport { useInfiniteUsers, useUser } from '../../lib/hooks/user';\n\nexport default function FollowersTab() {\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const { username } = useParams<{ username: string }>();\n  const { data: user } = useUser(username);\n  const {\n    data,\n    error,\n    isError,\n    isLoading,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfiniteUsers(`/users/${username}/following`);\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  return (\n    <Page title='Followers' description={user?.profile.name}>\n      <Header\n        back\n        title={`${user?.profile.name}`}\n        user={user}\n        meta={`${user?.following} following`}\n      />\n      <FollowTab username={username} />\n      {isLoading ? (\n        <CenteredLoading />\n      ) : isError ? (\n        <Box py={4}>\n          <Typography color='textSecondary' align='center'>\n            {error?.response?.data.message}\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          {data?.pages.map((page, i) => (\n            <Fragment key={i}>\n              {page.data.map((following, idx) => (\n                <Fragment key={idx}>\n                  <ProfileCard\n                    user={following}\n                    page={i}\n                    cacheKey={`/users/${username}/following`}\n                  />\n                </Fragment>\n              ))}\n            </Fragment>\n          ))}\n          <LoadMore\n            fullWidth\n            resource='users followed'\n            iconSize={16}\n            ref={loadMoreRef}\n            hasNextPage={hasNextPage}\n            isFetchingNextPage={isFetchingNextPage}\n            fetchNextPage={() => fetchNextPage()}\n            style={{ textTransform: 'capitalize' }}\n          />\n        </>\n      )}\n    </Page>\n  );\n}\n","import React from 'react';\nimport { useQueryClient } from 'react-query';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport DeleteForeverOutlinedIcon from '@material-ui/icons/DeleteForeverOutlined';\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\nimport FlagOutlinedIcon from '@material-ui/icons/FlagOutlined';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { User } from '../../types';\nimport { KEYS } from '../../lib/constants';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    menuPaper: {\n      minWidth: '220px',\n      padding: theme.spacing(1),\n    },\n    menuItem: {\n      minHeight: '32px',\n    },\n    listItemIcon: {\n      color: 'inherit',\n      minWidth: 0,\n      alignItems: 'center',\n      marginRight: theme.spacing(2),\n    },\n  })\n);\n\ntype DeleteMessageProps = {\n  authorId?: number;\n  anchorEl: null | HTMLElement;\n  closeMenu: () => void;\n  deleteMessage: () => void;\n  deleteMessageForUser: () => void;\n};\n\nexport default function DeleteMessage(props: DeleteMessageProps) {\n  const classes = useStyles();\n  const queryClient = useQueryClient();\n  const auth = queryClient.getQueryData<User>(KEYS.AUTH);\n\n  const {\n    anchorEl,\n    authorId,\n    closeMenu,\n    deleteMessage,\n    deleteMessageForUser,\n  } = props;\n\n  return (\n    <>\n      <Menu\n        keepMounted\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={closeMenu}\n        getContentAnchorEl={null}\n        classes={{ paper: classes.menuPaper }}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        <MenuItem\n          onClick={() => {\n            closeMenu();\n            deleteMessageForUser();\n          }}\n          classes={{ root: classes.menuItem }}\n        >\n          <ListItemIcon className={classes.listItemIcon}>\n            <DeleteOutlinedIcon fontSize='small' />\n          </ListItemIcon>\n          <ListItemText\n            primary='Delete message for me'\n            primaryTypographyProps={{ variant: 'subtitle2' }}\n          />\n        </MenuItem>\n        {authorId === auth?.id && (\n          <MenuItem\n            onClick={() => {\n              closeMenu();\n              deleteMessage();\n            }}\n            classes={{ root: classes.menuItem }}\n          >\n            <ListItemIcon className={classes.listItemIcon}>\n              <DeleteForeverOutlinedIcon fontSize='small' />\n            </ListItemIcon>\n            <ListItemText\n              primary='Delete message for everyone'\n              primaryTypographyProps={{ variant: 'subtitle2' }}\n            />\n          </MenuItem>\n        )}\n        {authorId !== auth?.id && (\n          <MenuItem\n            disabled\n            onClick={() => {\n              closeMenu();\n            }}\n            classes={{ root: classes.menuItem }}\n          >\n            <ListItemIcon className={classes.listItemIcon}>\n              <FlagOutlinedIcon fontSize='small' />\n            </ListItemIcon>\n            <ListItemText\n              primary='Report this message'\n              primaryTypographyProps={{ variant: 'subtitle2' }}\n            />\n          </MenuItem>\n        )}\n      </Menu>\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport { useQueryClient } from 'react-query';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { Box, TextField } from '@material-ui/core';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport SendIcon from '@material-ui/icons/Send';\n\nimport DeleteMessage from '../components/dropdown/message';\nimport { Message, User } from '../types';\nimport { KEYS } from '../lib/constants';\nimport { useDeleteMessage } from '../lib/hooks/messages';\nimport { useSendMessage } from '../lib/hooks/messages';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    msgBox: {\n      '&:hover span': {\n        visibility: 'visible',\n      },\n    },\n    authMsg: {\n      position: 'relative',\n      borderTopLeftRadius: 18,\n      borderTopRightRadius: 18,\n      borderBottomLeftRadius: 18,\n      padding: theme.spacing(1, 2),\n      color: theme.palette.common.white,\n      backgroundColor: theme.palette.primary.dark,\n    },\n    msgBody: {\n      borderTopLeftRadius: 18,\n      borderTopRightRadius: 18,\n      borderBottomRightRadius: 18,\n      padding: theme.spacing(1, 2),\n      backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n      display: 'flex',\n      alignItems: 'center',\n      width: '100%',\n    },\n    more: {\n      visibility: 'hidden',\n      margin: theme.spacing(0, 1),\n    },\n  })\n);\n\nexport function Chat({\n  message,\n  pageIndex,\n  username,\n}: {\n  message: Message;\n  username?: string;\n  pageIndex: number;\n}) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const classes = useStyles();\n  const queryClient = useQueryClient();\n  const auth = queryClient.getQueryData<User>(KEYS.AUTH);\n  const deleteMessage = useDeleteMessage();\n\n  return (\n    <>\n      <Box my={1}>\n        {message.author_id === auth?.id ? (\n          <Box\n            display='flex'\n            alignItems='center'\n            justifyContent='flex-end'\n            className={classes.msgBox}\n          >\n            <Box maxWidth='90%'>\n              <Box display='flex' alignItems='center'>\n                <span className={classes.more}>\n                  <IconButton\n                    size='small'\n                    aria-label='delete message'\n                    onClick={(e) => setAnchorEl(e.currentTarget)}\n                  >\n                    <MoreHorizIcon color='disabled' />\n                  </IconButton>\n                </span>\n                <Typography variant='body2' className={classes.authMsg}>\n                  {message.body}\n                </Typography>\n              </Box>\n              <Typography variant='body2' align='right' color='textSecondary'>\n                <small>\n                  {new Date(message.created_on).toLocaleDateString('en-gb', {\n                    hour12: true,\n                    hour: 'numeric',\n                    minute: 'numeric',\n                    month: 'short',\n                    day: 'numeric',\n                    year: 'numeric',\n                  })}\n                </small>\n              </Typography>\n            </Box>\n          </Box>\n        ) : (\n          <Box display='flex' alignItems='center' className={classes.msgBox}>\n            <Box maxWidth='90%'>\n              <Box display='flex' alignItems='center'>\n                <Typography variant='body2' className={classes.msgBody}>\n                  {message.body}\n                </Typography>\n                <span className={classes.more}>\n                  <IconButton\n                    size='small'\n                    aria-label='delete message'\n                    onClick={(e) => setAnchorEl(e.currentTarget)}\n                  >\n                    <MoreHorizIcon color='disabled' />\n                  </IconButton>\n                </span>\n              </Box>\n              <Typography variant='body2' color='textSecondary'>\n                <small>\n                  {new Date(message.created_on).toLocaleDateString('en-gb', {\n                    hour12: true,\n                    hour: 'numeric',\n                    minute: 'numeric',\n                    month: 'short',\n                    day: 'numeric',\n                    year: 'numeric',\n                  })}\n                </small>\n              </Typography>\n            </Box>\n          </Box>\n        )}\n      </Box>\n      <DeleteMessage\n        authorId={message.author_id}\n        anchorEl={anchorEl}\n        closeMenu={() => setAnchorEl(null)}\n        deleteMessage={() =>\n          deleteMessage.mutate({ msg_id: message.id, username, pageIndex })\n        }\n        deleteMessageForUser={() =>\n          deleteMessage.mutate({\n            msg_id: message.id,\n            username,\n            pageIndex,\n            userOnly: true,\n          })\n        }\n      />\n    </>\n  );\n}\n\nexport function ChatForm({\n  user,\n  authorId,\n}: {\n  user: { id: number; username: string };\n  authorId?: number;\n}) {\n  const [message, setMessage] = useState<string>('');\n  const classes = useStyles();\n  const sendMessage = useSendMessage();\n\n  const handleSubmit = (e: any) => {\n    e.preventDefault();\n\n    if (!message) return;\n\n    sendMessage.mutate({ message, to: user, from: authorId });\n    setMessage('');\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className={classes.form}>\n      <TextField\n        name='message'\n        placeholder='Enter your message here...'\n        type='text'\n        color='secondary'\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        fullWidth\n      />\n      <IconButton type='submit' aria-label='send message' color='primary'>\n        <SendIcon />\n      </IconButton>\n    </form>\n  );\n}\n","import React, { Fragment, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useQueryClient } from 'react-query';\nimport Typography from '@material-ui/core/Typography';\nimport { Paper, Hidden, Grid, Box, Container } from '@material-ui/core';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\n\nimport Head from '../../components/Head';\nimport Header from '../../components/Header';\nimport Messages from '../../components/Messages';\nimport Sidebar from '../../components/Sidebar';\nimport LoadMore, { CenteredLoading } from '../../components/Loading';\nimport { Chat, ChatForm } from '../../components/Chat';\nimport { KEYS } from '../../lib/constants';\nimport { User } from '../../types';\nimport {\n  useInfiniteChatMessages,\n  useInfiniteMessages,\n} from '../../lib/hooks/messages';\nimport useIntersectionObserver from '../../lib/hooks/useIntersectionObserver';\nimport { useUser } from '../../lib/hooks/user';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    main: {\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: 104,\n      },\n      [theme.breakpoints.up('lg')]: {\n        marginLeft: 244,\n      },\n    },\n    messages: {\n      marginTop: 4,\n      overflow: 'auto',\n      height: 'calc(100vh - 54px - 4px)',\n    },\n    paper: {\n      margin: '4px 0',\n      height: 'calc(100vh - 54px - 56px - 4px - 4px)',\n    },\n    chatArea: {\n      display: 'flex',\n      overflow: 'auto',\n      height: '100%',\n      flexDirection: 'column-reverse',\n      padding: theme.spacing(1),\n    },\n    button: {\n      textTransform: 'capitalize',\n    },\n    chatForm: {\n      position: 'static',\n      right: 0,\n      bottom: 0,\n      width: '100%',\n      padding: theme.spacing(1, 1, 0),\n    },\n  })\n);\n\nexport default function ChatPage() {\n  const classes = useStyles();\n  const loadMoreRef = useRef<HTMLButtonElement>(null);\n  const bottomScrollRef = useRef<Element>();\n  const queryClient = useQueryClient();\n  const auth = queryClient.getQueryData<User>(KEYS.AUTH);\n  const { username } = useParams<{ username: string }>();\n  const { data: user } = useUser(username);\n  const { data: messages, error, isError, isLoading } = useInfiniteMessages();\n  const {\n    data,\n    error: chatError,\n    isError: chatIsError,\n    isLoading: chatLoading,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfiniteChatMessages(`${username}`);\n\n  useIntersectionObserver({\n    enabled: hasNextPage,\n    target: loadMoreRef,\n    onIntersect: () => fetchNextPage(),\n  });\n\n  const scrollToBottom = () => {\n    bottomScrollRef.current?.scrollIntoView({\n      behavior: 'smooth',\n      block: 'end',\n      inline: 'nearest',\n    });\n  };\n\n  useEffect(() => {\n    if (bottomScrollRef) {\n      scrollToBottom();\n    }\n  }, [messages]);\n\n  return (\n    <>\n      <Head title='Messages' description={auth?.profile.name} />\n      <Container maxWidth='xl' disableGutters>\n        <Hidden xsDown>\n          <Sidebar user={auth} />\n        </Hidden>\n        <div className={classes.main}>\n          <Grid container spacing={1}>\n            <Hidden smDown>\n              <Grid item xs={12} md={6}>\n                <Header title='Messages' />\n                {isLoading ? (\n                  <CenteredLoading />\n                ) : isError ? (\n                  <Box py={4}>\n                    <Typography color='textSecondary' align='center'>\n                      {error?.response?.data.message}\n                    </Typography>\n                  </Box>\n                ) : (\n                  <>\n                    <Paper square elevation={0} className={classes.messages}>\n                      <Messages data={messages} />\n                    </Paper>\n                  </>\n                )}\n              </Grid>\n            </Hidden>\n            <Grid item xs={12} md={6}>\n              {user && (\n                <Header\n                  avatar\n                  back\n                  title={user.profile.name}\n                  meta={user.profile.username}\n                  user={user}\n                />\n              )}\n              <Paper square elevation={0} className={classes.paper}>\n                {chatLoading ? (\n                  <CenteredLoading />\n                ) : chatIsError ? (\n                  <Box py={4}>\n                    <Typography color='textSecondary' align='center'>\n                      {chatError?.response?.data.message}\n                    </Typography>\n                  </Box>\n                ) : (\n                  <>\n                    <Box className={classes.chatArea}>\n                      {data?.pages.map((page, i) => (\n                        <Fragment key={i}>\n                          {page.data.map((message, idx) => (\n                            <Fragment key={idx}>\n                              <Chat\n                                message={message}\n                                pageIndex={i}\n                                username={user?.profile.username}\n                              />\n                            </Fragment>\n                          ))}\n                        </Fragment>\n                      ))}\n                      <LoadMore\n                        fullWidth\n                        size='small'\n                        resource='messages'\n                        iconSize={16}\n                        ref={loadMoreRef}\n                        hasNextPage={hasNextPage}\n                        isFetchingNextPage={isFetchingNextPage}\n                        fetchNextPage={() => fetchNextPage()}\n                        className={classes.button}\n                      />\n                    </Box>\n                  </>\n                )}\n              </Paper>\n              <Paper square elevation={0} className={classes.chatForm}>\n                {user && (\n                  <ChatForm\n                    user={{ id: user.id, username: user.profile.username }}\n                    authorId={auth?.id}\n                  />\n                )}\n              </Paper>\n            </Grid>\n          </Grid>\n        </div>\n      </Container>\n    </>\n  );\n}\n","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport AppBar from '@material-ui/core/AppBar';\nimport Box from '@material-ui/core/Box';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport Header from '../../components/Header';\nimport Page from '../../components/Page';\nimport { KEYS } from '../../lib/constants';\nimport { useTag } from '../../lib/hooks/posts';\nimport TabChild, { a11yProps, TabPanel } from '../../components/tabs';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    appbar: {\n      boxShadow: theme.shadows[0],\n      backgroundColor: theme.palette.background.paper,\n    },\n    tab: {\n      textTransform: 'capitalize',\n    },\n  })\n);\n\nexport default function Tag() {\n  const [value, setValue] = React.useState(0);\n  const classes = useStyles();\n  const { name } = useParams<{ name: string }>();\n  const { data: tag, isLoading: loading, isError: tagError } = useTag(name);\n\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n    setValue(newValue);\n  };\n\n  const meta = loading || tagError ? '' : `${tag?.followedBy.count} following`;\n  const key = value === 1 ? [KEYS.TAGS, 'top'] : [KEYS.TAGS, 'latest'];\n\n  return (\n    <Page cacheKey={key} title='Tags' description='Select tags to follow'>\n      <Header back title={`#${name}`} meta={meta} />\n      <Box flexGrow={1} mt={0.5}>\n        <AppBar position='static' className={classes.appbar}>\n          <Tabs\n            value={value}\n            onChange={handleChange}\n            aria-label='Tag Tab'\n            textColor='primary'\n            indicatorColor='primary'\n            variant='fullWidth'\n          >\n            <Tab\n              label='Latest'\n              {...a11yProps('latest')}\n              className={classes.tab}\n            />\n            <Tab label='Top' {...a11yProps('top')} className={classes.tab} />\n          </Tabs>\n        </AppBar>\n        <TabPanel type='latest' value={value} index={0}>\n          <TabChild cacheKey={key} url={`/tags/${name}?latest=true`} />\n        </TabPanel>\n        <TabPanel value={value} index={1} type='top'>\n          <TabChild cacheKey={key} url={`/tags/${name}?top=true`} />\n        </TabPanel>\n      </Box>\n    </Page>\n  );\n}\n","import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport PrivateRoute from '../PrivateRoute';\nimport { ROUTES } from '../../lib/constants';\nimport { setAxiosDefaultParams } from '../../lib/axiosConfig';\n\nimport Login from '../../pages/Login';\nimport Signup from '../../pages/Signup';\nimport Landing from '../../pages/Landing';\nimport Home from '../../pages/Home';\nimport Explore from '../../pages/Explore';\nimport Notifications from '../../pages/Notifications';\nimport Messages from '../../pages/Messages';\nimport Post from '../../pages/Post';\nimport Profile from '../../pages/Profile';\nimport Followers from '../../pages/Profile/Followers';\nimport Following from '../../pages/Profile/Following';\nimport Chat from '../../pages/Chat';\nimport Tag from '../../pages/Tag';\n\nsetAxiosDefaultParams();\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route exact path={ROUTES.LANDING}>\n          <Landing />\n        </Route>\n        <Route exact path={ROUTES.SIGNUP}>\n          <Signup />\n        </Route>\n        <Route exact path={ROUTES.LOGIN}>\n          <Login />\n        </Route>\n        <PrivateRoute exact path={ROUTES.HOME}>\n            <Home />\n          </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.EXPLORE}>\n          <Explore />\n        </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.POST}>\n          <Post />\n        </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.TAG}>\n          <Tag />\n        </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.MESSAGES}>\n          <Messages />\n        </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.CHAT}>\n          <Chat />\n        </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.NOTIFICATIONS}>\n          <Notifications />\n        </PrivateRoute>  \n        <PrivateRoute exact path={ROUTES.PROFILE}>\n          <Profile />\n        </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.FOLLOWERS}>\n          <Followers />\n        </PrivateRoute>\n        <PrivateRoute exact path={ROUTES.FOLLOWING}>\n          <Following />\n        </PrivateRoute>\n        {/*  <Route exact path={ROUTES.TERMS}>\n              <Terms />\n            </Route> */}\n      </Switch>\n    </Router>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\n\ntype PreferenceProps = {\n  mode?: \"light\" | \"dark\";\n  faveColor: string;\n};\n\nconst preferences: PreferenceProps = {\n  mode: \"light\",\n  faveColor: \"#14b89c\",\n};\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: preferences.faveColor,\n    },\n    secondary: {\n      main: \"#e1e8ec\",\n    },\n    background: {\n      default: \"#e1e8ec\",\n      paper: \"#fafafa\",\n    },\n    type: preferences.mode,\n  },\n  mixins: {\n    toolbar: {\n      minHeight: \"54px\",\n    },\n  },\n  typography: {\n    h1: {\n      fontSize: \"3.5rem\",\n    },\n    h2: {\n      fontSize: \"3rem\",\n    },\n    h3: {\n      fontSize: \"2.5rem\",\n    },\n    h4: {\n      fontSize: \"2rem\",\n    },\n    h5: {\n      fontSize: \"1.5rem\",\n    },\n    h6: {\n      fontSize: \"1.2rem\",\n    },\n  },\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { ReactQueryDevtools } from 'react-query/devtools';\nimport { MuiThemeProvider, CssBaseline } from '@material-ui/core';\nimport reportWebVitals from './reportWebVitals';\nimport { theme } from './lib/theme';\n\nconst queryClient = new QueryClient();\n\nconst render = () => {\n  const App = require('./components/App').default;\n\n  ReactDOM.render(\n    <MuiThemeProvider theme={theme}>\n      <CssBaseline />\n      <React.StrictMode>\n        <QueryClientProvider client={queryClient}>\n          <App />\n          <ReactQueryDevtools />\n        </QueryClientProvider>\n      </React.StrictMode>\n    </MuiThemeProvider>,\n    document.getElementById('root')\n  );\n};\n\nrender();\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./components/App', render);\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}